<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Countries Demo | No SPA | Web Components</title>
    <link rel="stylesheet" href="css/countries.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui-flag@2.4.0/flag.min.css">
    <link rel="canonical" href="https://www.dataformsjs.com/examples/countries-no-spa-hbs.htm">
    <style>
        /* Prevent custom web components from appearing during rendering include the following CSS */
        json-data:not(:defined),
        is-loading:not(:defined),
        has-error:not(:defined),
        is-loaded:not(:defined) { display:none; }
    </style>
</head>
<body>
    <div id="view">
        <h1>Countries</h1>

        <json-data url="https://www.dataformsjs.com/data/geonames/countries">
            <is-loading>
                <span class="loading">Loading...</span>
            </is-loading>
            <has-error>
                <span class="error" data-bind="errorMessage"></span>
            </has-error>
            <is-loaded class="flex-col">
                <input
                    is="input-filter"
                    filter-selector="table"
                    filter-results-selector="h1"
                    filter-results-text-all="{totalCount} Countries"
                    filter-results-text-filtered="Showing {displayCount} of {totalCount} Countries"
                    placeholder="Enter filter, example 'North America'">

                <p>Click on a column to sort rows based on column values.</p>

                <div class="responsive-table">
                    <data-table
                        data-bind="countries"
                        highlight-class="highlight"
                        labels="Code, Name, Size (KM), Population, Continent"
                        table-attr="is=sortable-table,
                                    data-sort-class-odd=row-odd,
                                    data-sort-class-even=row-even">
                        <script type="text/x-template">
                            <tr>
                                <td>${iso}</td>
                                <td>
                                    <i class="${iso.toLowerCase()} flag"></i>
                                    ${country}
                                </td>
                                <td class="align-right" data-value="${area_km}">${Format.number(area_km)}</td>
                                <td class="align-right" data-value="${population}">${Format.number(population)}</td>
                                <td>${continent}</td>
                            </tr>
                        </script>
                    </data-table>
                </div>
            </is-loaded>
        </json-data>
    </div>

    <!-- 
        TODO - IE 11 is removing <tr> from DOM in <template> but not
            <script type="text/x-template">
        See comments at top of [dataformsjs\js\web-components\polyfill.js]

        * Now considering using <script type="text/x-template"> for all browsers as the fix.
            <template> still works for modern browsers only

        [#test-3] does keep the content from IE:
            document.getElementById('test-3').innerHTML

        [#test-4] shows that IE keeps the innerHTML but adds a <tbody>
    -->

    <!--
    <template id="test-1">
        <tr>
            <td>${iso}</td>
            <td>
                <i class="${iso.toLowerCase()} flag"></i>
                ${country}
            </td>
            <td class="align-right" data-value="${area_km}">${Format.number(area_km)}</td>
            <td class="align-right" data-value="${population}">${Format.number(population)}</td>
            <td>${continent}</td>
        </tr>
    </template>

    <script type="text/x-template" id="test-2">
        <tr>
            <td>${iso}</td>
            <td>
                <i class="${iso.toLowerCase()} flag"></i>
                ${country}
            </td>
            <td class="align-right" data-value="${area_km}">${Format.number(area_km)}</td>
            <td class="align-right" data-value="${population}">${Format.number(population)}</td>
            <td>${continent}</td>
        </tr>
    </script>
    -->
   
    <template id="test-3">
        <!--
        <tr>
            <td>${iso}</td>
            <td>
                <i class="${iso.toLowerCase()} flag"></i>
                ${country}
            </td>
            <td class="align-right" data-value="${area_km}">${Format.number(area_km)}</td>
            <td class="align-right" data-value="${population}">${Format.number(population)}</td>
            <td>${continent}</td>
        </tr>
        -->
    </template>

    <!--
    <template id="test-4">
        <table>
            <tr>
                <td>${iso}</td>
                <td>
                    <i class="${iso.toLowerCase()} flag"></i>
                    ${country}
                </td>
                <td class="align-right" data-value="${area_km}">${Format.number(area_km)}</td>
                <td class="align-right" data-value="${population}">${Format.number(population)}</td>
                <td>${continent}</td>
            </tr>
        </table>
    </template>
    -->

    <!-- DataFormsJS Web Components -->
    <!-- <script type="module" src="https://cdn.jsdelivr.net/npm/dataformsjs@4.8.0/js/web-components/json-data.min.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/dataformsjs@4.8.0/js/web-components/data-table.min.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/dataformsjs@4.8.0/js/web-components/input-filter.min.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/dataformsjs@4.8.0/js/web-components/sortable-table.min.js"></script> -->

    <script type="module" src="../js/web-components/json-data.js"></script>
    <script type="module" src="../js/web-components/data-table.js"></script>
    <script type="module" src="../js/web-components/input-filter.js"></script>
    <script type="module" src="../js/web-components/sortable-table.js"></script>

    <script nomodule src="../js/web-components/polyfill.js"></script>

    <!-- <script src="../js/web-components/polyfill.js"></script> -->

    <!-- Older browsers (IE, Older Mobile Devices, etc) will see a warning -->
    <!-- <script nomodule src="https://cdn.jsdelivr.net/npm/dataformsjs@4.8.0/js/web-components/safari-nomodule.min.js"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/dataformsjs@4.8.0/js/web-components/old-browser-warning.min.js"></script> -->
</body>
</html>