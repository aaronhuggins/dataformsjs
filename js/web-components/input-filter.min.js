import{componentsAreSetup,isAttachedToDom,usingWebComponentsPolyfill,defineExtendsPolyfill}from"./utils.min.js";class InputFilter extends HTMLInputElement{constructor(){super(),usingWebComponentsPolyfill()||this.addEventListener("input",this.filter)}async connectedCallback(){await componentsAreSetup(),isAttachedToDom(this)&&this.filter()}filter(){const t=this.value.toLowerCase().split(" "),e=t.length,s=0!==e;let l=0,i=null,n=null,o=document.querySelectorAll(this.getAttribute("filter-selector"));if(1===o.length&&"TABLE"===o[0].tagName){const t=o[0];switch(t.tBodies.length){case 0:o=[];break;case 1:o=t.tBodies[0].rows,i=t.getAttribute("data-sort-class-odd"),n=t.getAttribute("data-sort-class-even");break;default:console.warn("Unexpected Table format for Filter Plugin. Only 1 <tbody> element is supported.")}}const r=o.length,u=n&&i;for(const r of o){let o=!0;if(s){const s=r.textContent.toLowerCase();for(let l=0;l<e;l++)if(""!==t[l]&&!s.includes(t[l])){o=!1;break}}o&&(l++,u&&(l%2==0?(r.classList.add(n),r.classList.remove(i)):(r.classList.add(i),r.classList.remove(n)))),r.style.display=o?"":"none"}const a=this.getAttribute("filter-results-selector");if(a){const t=document.querySelector(a);if(!t)return void console.warn("Defined [filter-results-selector] but element not found");const e=this.getAttribute("filter-results-text-all"),s=this.getAttribute("filter-results-text-filtered");if(!e)return void console.warn("Defined [filter-results-selector] without [filter-results-text-all]");if(!s)return void console.warn("Defined [filter-results-selector] without [filter-results-text-filtered]");let i;i=(i=l===r?e:s.replace(/{displayCount}/g,l)).replace(/{totalCount}/g,r),t.textContent=i}}}window.customElements.define("input-filter",InputFilter,{extends:"input"}),defineExtendsPolyfill("input-filter","input",t=>{t.addEventListener("input",InputFilter.prototype.filter)});