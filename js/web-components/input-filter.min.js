import{componentsAreSetup,usingWebComponentsPolyfill,defineExtendsPolyfill}from"./utils.min.js";class InputFilter extends HTMLInputElement{constructor(){super(),usingWebComponentsPolyfill()||this.addEventListener("input",this.filter)}async connectedCallback(){await componentsAreSetup(),this.filter()}filter(){const t=this.value.toLowerCase().split(" "),e=t.length,l=0!==e;let s=0,i=null,n=null,r=document.querySelectorAll(this.getAttribute("filter-selector"));if(1===r.length&&"TABLE"===r[0].tagName&&r[0].tHead&&1===r[0].tHead.rows.length&&1===r[0].tBodies.length){const t=r[0];i=t.getAttribute("data-sort-class-odd"),n=t.getAttribute("data-sort-class-even"),r=r[0].tBodies[0].rows}const o=r.length,u=n&&i;for(const o of r){let r=!0;if(l){const l=o.textContent.toLowerCase();for(let s=0;s<e;s++)if(""!==t[s]&&!l.includes(t[s])){r=!1;break}}r&&(s++,u&&(s%2==0?(o.classList.add(n),o.classList.remove(i)):(o.classList.add(i),o.classList.remove(n)))),o.style.display=r?"":"none"}const c=this.getAttribute("filter-results-selector");if(c){const t=document.querySelector(c);if(!t)return void console.warn("Defined [filter-results-selector] but element not found");const e=this.getAttribute("filter-results-text-all"),l=this.getAttribute("filter-results-text-filtered");if(!e)return void console.warn("Defined [filter-results-selector] without [filter-results-text-all]");if(!l)return void console.warn("Defined [filter-results-selector] without [filter-results-text-filtered]");let i;i=(i=s===o?e:l.replace(/{displayCount}/g,s)).replace(/{totalCount}/g,o),t.textContent=i}}}window.customElements.define("input-filter",InputFilter,{extends:"input"}),defineExtendsPolyfill("input-filter","input",t=>{t.addEventListener("input",InputFilter.prototype.filter)});