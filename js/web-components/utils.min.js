let polyfillIsNeeded=null;const errorStyleId="dataformsjs-style-errors",errorCss="\n    .dataformsjs-error,\n    .dataformsjs-fatal-error {\n        color:#fff;\n        background-color:red;\n        box-shadow:0 1px 5px 0 rgba(0,0,0,.5);\n        background-image:linear-gradient(#e00,#c00);\n        // Next line is included but commented out because it should not show on mobile\n        // however on desktop with DevTools the commented out version makes it easy for a\n        // developer to toggle on errors that use line breaks and white space formatting.\n        /* white-space:pre; */\n        text-align: left;\n    }\n\n    .dataformsjs-error{\n        padding:10px;\n        font-size:1em;\n        margin:5px;\n        display:inline-block;\n    }\n\n    .dataformsjs-fatal-error {\n        z-index:1000000;\n        padding:20px;\n        font-size:1.5em;\n        margin:20px;\n        position:fixed;\n        top:10px;\n    }\n\n    @media only screen and (min-width:1000px){\n        .dataformsjs-fatal-error {\n            max-width:1000px;\n            left:calc(50% - 520px);\n        }\n    }\n\n    .dataformsjs-fatal-error span {\n        padding:5px 10px;\n        float:right;\n        border:1px solid darkred;\n        cursor:pointer;\n        margin-left:10px;\n        box-shadow:0 0 2px 1px rgba(0,0,0,0.3);\n        background-image:linear-gradient(#c00,#a00);\n        border-radius:5px;\n    }\n";export function escapeHtml(e){return void 0===e||null===e||"number"==typeof e?e:String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};export function render(e,...n){const t=[e[0]];for(let o=0,r=n.length;o<r;o++)t.push(escapeHtml(n[o])),t.push(e[o+1]);return t.join("")};export function buildUrl(e,n){let t=String(e);if(t=t.replace(/\{(\w+)\}/g,function(e,n){return"string"==typeof window[n]?window[n]:e}),null!==n&&"object"==typeof n)for(const e in n)n.hasOwnProperty(e)&&t.indexOf(":"+e)>-1&&(t=t.replace(new RegExp(":"+e,"g"),encodeURIComponent(n[e])));return t};export function setElementText(e,n){if(!(e instanceof HTMLElement||e instanceof SVGElement))return void console.warn("Called setElementText() with an invalid parameter");const t=e.nodeName;switch(t){case"INPUT":if("checkbox"===e.type){const t=String(n).toLowerCase();e.checked="true"===t||"1"===t||"yes"===t||"y"===t}else e.value=null===n?"":String(n);break;case"SELECT":case"TEXTAREA":e.value=null===n?"":String(n);break;default:(t.includes("-")||null!==e.getAttribute("is"))&&"value"in e?e.value=n:e.textContent=null===n?"":String(n)}};export function getBindValue(e,n){const t=n.split(".");let o=t.length>1&&"window"===t[0]?window:e;for(let e=0,n=t.length;e<n;e++)o="object"==typeof o&&null!==o?o[t[e]]:null;return void 0===o?null:o};export function bindAttrTmpl(e,n,t){const o=e.getAttribute(n).split(",").map(e=>e.trim());for(const r of o){let o=e.getAttribute(n+"-"+r);if(null===o&&null!==(o=e.getAttribute(r))&&e.setAttribute(n+"-"+r,o),null!==o){let n=0;const l=100;for(;n<l;){const e=o.indexOf("["),r=o.indexOf("]");if(-1===e||-1===r||r<e)break;let l=getBindValue(t,o.substring(e+1,r));void 0===l&&(l=""),o=o.substring(0,e)+l+o.substring(r+1),n++}e.setAttribute(r,o)}}};export function showError(e,n){if(null===e)return void showErrorAlert(n);loadCss(errorStyleId,errorCss);const t=document.createElement("span");t.className="dataformsjs-error",t.textContent=n,e.innerHTML="",e.appendChild(t),"string"!=typeof n&&console.error(n)};export function showErrorAlert(e){loadCss(errorStyleId,errorCss);let n=e;"string"==typeof n&&-1===n.toLowerCase().indexOf("error")&&(n="Error: "+n);const t=document.createElement("div");t.className="dataformsjs-fatal-error",t.textContent=n;const o=document.createElement("span");o.textContent="âœ•",o.onclick=(e=>{document.body.removeChild(e.target.parentNode)}),t.insertBefore(o,t.firstChild),document.body.appendChild(t),"string"!=typeof e&&console.error(e)};export function loadCss(e,n){let t=document.getElementById(e);null===t&&((t=document.createElement("style")).id=e,t.innerHTML=n,document.head.appendChild(t))};export function usingWebComponentsPolyfill(){return window.app&&window.app.settings&&!0===window.app.settings.usingWebComponentsPolyfill};export function polyfillCustomElements(e=document){if(null===polyfillIsNeeded){class e extends HTMLDivElement{}void 0===window.customElements.get("web-component-polyfill-check")&&window.customElements.define("web-component-polyfill-check",e,{extends:"div"});let n=document.querySelector("body");n||(n=document.documentElement),n.insertAdjacentHTML("beforeend",'<div is="web-component-polyfill-check"></div>');const t=document.querySelector('div[is="web-component-polyfill-check"]');polyfillIsNeeded=!(t instanceof e),n.removeChild(t)}if(polyfillIsNeeded&&Array.isArray(window._webComponentPolyfills))for(const n of window._webComponentPolyfills){const t=e.querySelectorAll(`${n.extendsElement}[is="${n.element}"]`);for(const e of t)try{n.setup(e)}catch(t){showErrorAlert(t),console.log(n.element),console.log(e)}}};export function defineExtendsPolyfill(e,n,t){window._webComponentPolyfills=window._webComponentPolyfills||[],window._webComponentPolyfills.push({element:e,extendsElement:n,setup:t}),document.addEventListener("DOMContentLoaded",runPolyfill)};function runPolyfill(){polyfillCustomElements(document)}export function componentsAreDefined(e,n=""){return new Promise(async t=>{const o=e.querySelectorAll(n+":not(:defined)");if(o.length>0){const e=[...o].map(e=>window.customElements.whenDefined(e.getAttribute("is")||e.localName));await Promise.all(e)}t()})};export function componentsAreSetup(){return new Promise(async e=>{const n=document.querySelectorAll(":not(:defined)");if(n.length>0){const e=[...n].map(e=>window.customElements.whenDefined(e.getAttribute("is")||e.localName));await Promise.all(e)}let t=0;const o=window.setInterval(()=>{0===document.querySelectorAll("[not-setup]").length?(window.clearInterval(o),e()):t>1e3&&(window.clearInterval(o),e()),t++},10)})};export function isAttachedToDom(e){let n=e.parentNode;for(;null!==n;)if((n=n.parentNode)===document)return!0;return!1};