let polyfillIsNeeded=null;export function escapeHtml(e){return void 0===e||null===e||"number"==typeof e?e:String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};export function render(e,...t){const n=[e[0]];for(let o=0,l=t.length;o<l;o++)n.push(escapeHtml(t[o])),n.push(e[o+1]);return n.join("")};export function buildUrl(e,t){let n=e;if(null!==t&&"object"==typeof t)for(const e in t)t.hasOwnProperty(e)&&n.indexOf(":"+e)>-1&&(n=n.replace(new RegExp(":"+e,"g"),encodeURIComponent(t[e])));return n};export function setElementText(e,t){if(null===e||"object"!=typeof e||!(e instanceof HTMLElement))return void console.warn("Called setElementText() with an invalid parameter");const n=e.nodeName;switch(n){case"INPUT":if("checkbox"===e.type){const n=String(t).toLowerCase();e.checked="true"===n||"1"===n||"yes"===n||"y"===n}else e.value=null===t?"":String(t);break;case"SELECT":case"TEXTAREA":e.value=null===t?"":String(t);break;default:(n.includes("-")||null!==e.getAttribute("is"))&&"value"in e?e.value=t:e.textContent=null===t?"":String(t)}};export function getBindValue(e,t){const n=t.split(".");let o=n.length>1&&"window"===n[0]?window:e;for(let e=0,t=n.length;e<t;e++)o="object"==typeof o&&null!==o?o[n[e]]:null;return void 0===o?null:o};export function bindAttrTmpl(e,t,n){const o=e.getAttribute(t).split(",").map(e=>e.trim());for(const l of o){let o=e.getAttribute(t+"-"+l);if(null===o&&null!==(o=e.getAttribute(l))&&e.setAttribute(t+"-"+l,o),null!==o){let t=0;const i=100;for(;t<i;){const e=o.indexOf("["),l=o.indexOf("]");if(-1===e||-1===l||l<e)break;let i=getBindValue(n,o.substring(e+1,l));void 0===i&&(i=""),o=o.substring(0,e)+i+o.substring(l+1),t++}e.setAttribute(l,o)}}};export function showError(e,t){const n=document.createElement("span");n.style.padding="1em",n.style.backgroundColor="red",n.style.color="white",n.style.fontSize="1.5em",n.textContent=t,e.innerHTML="",e.appendChild(n),console.error(t)};export function showErrorAlert(e){const t="dataformsjs-fatal-error";let n=document.getElementById(t);n?n.textContent=e:((n=document.createElement("div")).id=t,n.style.color="#fff",n.style.backgroundColor="#f00",n.style.backgroundImage="linear-gradient(#e00, #c00)",n.style.boxShadow="0 1px 5px 0 rgba(0,0,0,.5)",n.style.zIndex="1000000",n.style.padding="20px",n.style.fontSize="1.5em",n.style.margin="20px",n.style.position="fixed",n.style.top="10px",n.textContent=e,document.body.appendChild(n)),console.error(e)};export function usingWebComponentsPolyfill(){return window.app&&window.app.settings&&!0===window.app.settings.usingWebComponentsPolyfill};export function polyfillCustomElements(){if(null===polyfillIsNeeded){class e extends HTMLDivElement{}void 0===window.customElements.get("web-component-polyfill-check")&&window.customElements.define("web-component-polyfill-check",e,{extends:"div"});let t=document.querySelector("body");t||(t=document.documentElement),t.insertAdjacentHTML("beforeend",'<div is="web-component-polyfill-check"></div>');const n=document.querySelector('div[is="web-component-polyfill-check"]');polyfillIsNeeded=!(n instanceof e),t.removeChild(n)}if(polyfillIsNeeded&&Array.isArray(window._webComponentPolyfills))for(const e of window._webComponentPolyfills){const t=document.querySelectorAll(`${e.extendsElement}[is="${e.element}"]`);for(const n of t)try{e.setup(n)}catch(t){console.error(t),console.log(e.element),console.log(n)}}};export function defineExtendsPolyfill(e,t,n){window._webComponentPolyfills=window._webComponentPolyfills||[],window._webComponentPolyfills.push({element:e,extendsElement:t,setup:n})};export function componentsAreDefined(e,t=""){return new Promise(async n=>{const o=e.querySelectorAll(t+":not(:defined)");if(o.length>0){const e=[...o].map(e=>window.customElements.whenDefined(e.getAttribute("is")||e.localName));await Promise.all(e)}n()})};export function componentsAreSetup(){return new Promise(async e=>{const t=document.querySelectorAll(":not(:defined)");if(t.length>0){const e=[...t].map(e=>window.customElements.whenDefined(e.getAttribute("is")||e.localName));await Promise.all(e)}const n=window.setInterval(()=>{0===document.querySelectorAll("[not-setup]").length&&(window.clearInterval(n),e())},10)})};