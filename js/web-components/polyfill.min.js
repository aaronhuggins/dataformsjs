!function(){"use strict";var t="web-components-polyfill-css",e=["template { display:none }","[data-control] { display:block; padding:0; margin:0; }",'div[data-control="json-data"] > div.is-loading,','div[data-control="json-data"] > div.has-error,','div[data-control="json-data"] > div.is-loaded { padding:0; margin:0; }'].join("\n"),a=null,r=null,o={dataAttributes:function(t,e){e.forEach(function(e){var a=t.getAttribute(e);null!==a&&t.setAttribute("data-"+e,a)})},jsonData:function(t){var e=t.getAttribute("url");t.setAttribute("data-url",e);["is-loading","has-error","is-loaded"].forEach(function(e){var a=t.querySelector(e);if(a){var r=document.createElement("div");for(r.className=a.className,r.classList.add(e);a.firstChild;)r.appendChild(a.removeChild(a.firstChild));a.parentNode.replaceChild(r,a)}})},dataList:function(t){o.dataAttributes(t,["template-selector","root-element","root-class","error-class"])},dataTable:function(t){o.dataAttributes(t,["highlight-class","labels","columns","table-attr","highlight-class"])},imageGallery:function(t){t.setAttribute("data-image-gallery",t.getAttribute("image")),o.dataAttributes(t,["image-avif","image-webp"]);var e=t.getAttribute("title");if(null===e){var a=t.querySelector("img[alt]");a&&(e=a.getAttribute("alt"),t.setAttribute("title",e))}},inputFilter:function(t){o.dataAttributes(t,["filter-selector","filter-results-selector","filter-results-text-all","filter-results-text-filtered"])},leafletMap:function(t){t.setAttribute("data-leaflet",""),o.dataAttributes(t,["latitude","longitude","zoom","marker"]);var e=t.getAttribute("data-bind-attr");e&&!e.includes("data-")&&(e=e.split(",").map(function(t){return"data-"+t.trim()}),t.setAttribute("data-bind-attr",e.join(", ")))},navLinks:function(){var t=document.querySelector('nav[is="spa-links"]');if(t){var e=t.getAttribute("item-selector");e&&(app.plugins.navLinks.itemSelector='nav[is="spa-links"] '+e);var a=t.getAttribute("active-class");a&&(app.plugins.navLinks.activeClass=a)}}},i={model:{},onRendered:function(){var t=this,e=document.querySelectorAll("[url-param]");Array.prototype.forEach.call(e,function(e){var a=e.getAttribute("url-param");void 0!==t[a]&&(e.textContent=t[a])}),e=document.querySelectorAll("[url-attr-param]"),Array.prototype.forEach.call(e,function(e){app.plugins.dataBind.bindAttrTmpl(e,"url-attr-param",t)}),l(document,"app:routeChanged");var a=!1;app.activeJsControls.forEach(function(t){"json-data"===t.control&&(o.jsonData(t.element),app.loadJsControl(t),a=!0)}),a||n()}};function n(){var t=[];app.activeJsControls.forEach(function(t){switch(t.control){case"data-table":o.dataTable(t.element),app.loadJsControl(t);break;case"data-list":o.dataList(t.element),app.loadJsControl(t)}}),document.querySelector("[data-bind]")&&app.plugins.dataBind.reload(),[{selector:".click-to-highlight",plugin:"clickToHighlight"},{selector:"[data-sort]",plugin:"sort"},{selector:'[is="spa-links"]',plugin:"navLinks",after:o.navLinks},{selector:'[is="input-filter"]',plugin:"filter",update:o.inputFilter},{selector:'[is="leaflet-map"]',plugin:"leaflet",update:o.leafletMap},{selector:"image-gallery",plugin:"imageGallery",update:o.imageGallery}].forEach(function(e){if(document.querySelector(e.selector)&&(void 0===typeof e.after?t.push(e.plugin):t.push({name:e.plugin,callback:e.after}),void 0!==e.update)){var a=document.querySelectorAll(e.selector);Array.prototype.forEach.call(a,function(t){e.update(t)})}}),t.forEach(function(t){"string"==typeof t?s(t):s(t.name,t.callback)}),l(document,"app:contentReady")}function l(t,e,a){var r;void 0===a?"function"==typeof Event?r=new Event(e,{bubbles:!0}):(r=document.createEvent("Event")).initEvent(e,!0,!1):"function"==typeof CustomEvent?r=new CustomEvent(e,{bubbles:!0,detail:a}):(r=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!1,a),t.dispatchEvent(r)}function s(t,e){if(void 0!==app.plugins[t])return void 0!==e&&e(),void app.plugins[t].reload();var o=a+"plugins/"+t+(r?".min":"")+".js";app.loadScripts(o).then(function(){void 0!==app.plugins[t]?(void 0!==e&&e(),app.plugins[t].reload()):console.warn("Plugin ["+t+"] was loaded but not found. The script might still be loading in the DOM.")})}function p(){var o=[app.loadScripts(a+"controls/data-list"+(r?".min":"")+".js"),app.loadScripts(a+"controls/data-table"+(r?".min":"")+".js"),app.loadScripts(a+"controls/json-data"+(r?".min":"")+".js"),app.loadScripts(a+"extensions/format"+(r?".min":"")+".js"),app.loadScripts(a+"plugins/dataBind"+(r?".min":"")+".js")];Promise.all(o).finally(function(){app.addPage("polyfillPage",i).loadCss(t,e),app.settings.usingWebComponentsPolyfill=!0,app.controls["json-data"].onFetch=function(){app.activeModel=this,app.activeController&&app.activeController.modelName&&(app.models[app.activeController.modelName]=app.activeModel),n()},function(){function t(t,e){l(t,"app:error",e),l(t,"app:routeChanged"),app.showError(t,e),console.error(e)}var e=document.querySelector("url-hash-router"),a="url-hash-route";if(null===e){if(null===(e=document.querySelector("url-router")))return;a="url-route",document.documentElement.setAttribute("data-routing-mode","history")}if(app.settings.viewSelector=e.getAttribute("view-selector"),null!==app.settings.viewSelector)if(null!==document.querySelector(app.settings.viewSelector)){var r=e.querySelectorAll(a),o=0;Array.prototype.forEach.call(r,function(a){var r=a.getAttribute("path");if(null===r)return t(e,"Error, element <"+a.tagName.toLowerCase()+"> is missing attribute [path]"),void console.log(a);null!==a.getAttribute("default-route")&&(app.settings.defaultRoute=r);var i=a.getAttribute("redirect");if(null===i){var n,l=a.getAttribute("src");if(null===l||""===l){l=void 0;var s=a.querySelector("template");if(null===s)return app.showErrorAlert("Missing <template> or [src] attribute for route <"+a.tagName.toLowerCase()+' path="'+r+'">.'),void console.log(a);s.id||(s.id="url-hash-route-template-"+o+"-"+(new Date).getTime(),o++),n=s.id}app.addController({path:r,viewId:n,viewUrl:l,viewEngine:"Text",pageType:"polyfillPage"})}else app.addController({path:r,onRendered:function(){app.changeRoute(this.redirect)},settings:{redirect:i}})}),app.setup()}else t(e,'Error, element from <url-hash-router view-selector="'+app.escapeHtml(app.settings.viewSelector)+'"> was not found on the page.');else t(e,"Error, element <"+e.tagName.toLowerCase()+"> is missing attribute [view-selector]")}(),document.querySelector("url-hash-router, url-router")||(app.activeModel={},app.onUpdateViewComplete=function(){i.onRendered()},app.updateTemplatesForIE(),app.updateView())})}document.addEventListener("DOMContentLoaded",function(){var t=null;void 0!==window.app&&"object"==typeof window.app.plugins&&void 0===window.DataFormsJS&&(t=window.app.plugins,delete window.app),function(){if("string"==typeof window.dataformsjsUrl)return a=window.dataformsjsUrl,void(r=!1!==window.dataformsjsMinFiles);for(var t=["/web-components/polyfill.min.js","/web-components/polyfill.js"],e=0;e<2;e++){var o,i=document.querySelector('script[src$="'+t[e]+'"]');if(i)return o=i.getAttribute("src"),a=o.substr(0,o.length-t[e].length+1),void(r=0===e)}a="https://cdn.jsdelivr.net/npm/dataformsjs@latest/js/",r=!0}(),function(t,e){var a=document.createElement("script");a.onload=e,a.onerror=function(){console.error("Error loading Script: "+t),e()},a.src=t,document.head.appendChild(a)}(a+"DataFormsJS"+(r?".min":"")+".js",function(){if(null!==t)for(var e in t)t.hasOwnProperty(e)&&app.addPlugin(e,t[e]);var a=!!(Array.from&&window.Promise&&window.fetch&&Promise.prototype.finally);app.loadScript(a,app.settings.polyfillUrl,p)})})}();