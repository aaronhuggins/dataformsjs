!function(){"use strict";var t="web-components-polyfill-css",e=["template { display:none }","[data-control] { display:block; padding:0; margin:0; }",'div[data-control="json-data"] > div.is-loading,','div[data-control="json-data"] > div.has-error,','div[data-control="json-data"] > div.is-loaded { padding:0; margin:0; }'].join("\n"),a=null,r=null,o={dataAttributes:function(t,e){e.forEach(function(e){var a=t.getAttribute(e);null!==a&&t.setAttribute("data-"+e,a)})},jsonData:function(t){var e=t.getAttribute("url");t.setAttribute("data-url",e);["is-loading","has-error","is-loaded"].forEach(function(e){var a=t.querySelector(e);if(a){var r=document.createElement("div");for(r.className=a.className,r.classList.add(e);a.firstChild;)r.appendChild(a.removeChild(a.firstChild));a.parentNode.replaceChild(r,a)}})},dataList:function(t){o.dataAttributes(t,["template-selector","root-element","root-class","error-class"])},dataTable:function(t){o.dataAttributes(t,["highlight-class","labels","columns","table-attr","highlight-class"])},imageGallery:function(t){t.setAttribute("data-image-gallery",t.getAttribute("image")),o.dataAttributes(t,["image-avif","image-webp"]);var e=t.getAttribute("title");if(null===e){var a=t.querySelector("img[alt]");a&&(e=a.getAttribute("alt"),t.setAttribute("title",e))}},inputFilter:function(t){o.dataAttributes(t,["filter-selector","filter-results-selector","filter-results-text-all","filter-results-text-filtered"])},leafletMap:function(t){t.setAttribute("data-leaflet",""),o.dataAttributes(t,["latitude","longitude","zoom","marker"]);var e=t.getAttribute("data-bind-attr");e&&!e.includes("data-")&&(e=e.split(",").map(function(t){return"data-"+t.trim()}),t.setAttribute("data-bind-attr",e.join(", ")))}},l={model:{},onRendered:function(){var t=this,e=document.querySelectorAll("[url-param]");Array.prototype.forEach.call(e,function(e){var a=e.getAttribute("url-param");void 0!==t[a]&&(e.textContent=t[a])}),e=document.querySelectorAll("[url-attr-param]"),Array.prototype.forEach.call(e,function(e){app.plugins.dataBind.bindAttrTmpl(e,"url-attr-param",t)});var a=!1;app.activeJsControls.forEach(function(t){"json-data"===t.control&&(o.jsonData(t.element),app.loadJsControl(t),a=!0)}),a||n()}};function n(){var t=[];app.activeJsControls.forEach(function(t){switch(t.control){case"data-table":o.dataTable(t.element),app.loadJsControl(t);break;case"data-list":o.dataList(t.element),app.loadJsControl(t)}});var e,l=document.querySelectorAll("image-gallery");l.length>0&&(Array.prototype.forEach.call(l,function(t){o.imageGallery(t)}),t.push("imageGallery")),document.querySelector("[data-bind]")&&app.plugins.dataBind.reload(),[{selector:".click-to-highlight",plugin:"clickToHighlight"},{selector:"[data-sort]",plugin:"sort"},{selector:'[is="input-filter"]',plugin:"filter",update:o.inputFilter},{selector:'[is="leaflet-map"]',plugin:"leaflet",update:o.leafletMap}].forEach(function(e){if(document.querySelector(e.selector)&&(t.push(e.plugin),void 0!==e.update)){var a=document.querySelectorAll(e.selector);Array.prototype.forEach.call(a,function(t){e.update(t)})}}),t.forEach(function(t){!function(t){if(void 0!==app.plugins[t])return void app.plugins[t].reload();var e=a+"plugins/"+t+(r?".min":"")+".js";app.loadScripts(e).then(function(){void 0!==app.plugins[t]?app.plugins[t].reload():console.warn("Plugin ["+t+"] was loaded but not found. The script might still be loading in the DOM.")})}(t)}),"function"==typeof Event?e=new Event("app:contentReady"):(e=document.createEvent("Event")).initEvent("app:contentReady",!0,!0),document.dispatchEvent(e)}function i(){var o=[app.loadScripts(a+"controls/data-list"+(r?".min":"")+".js"),app.loadScripts(a+"controls/data-table"+(r?".min":"")+".js"),app.loadScripts(a+"controls/json-data"+(r?".min":"")+".js"),app.loadScripts(a+"extensions/format"+(r?".min":"")+".js"),app.loadScripts(a+"plugins/dataBind"+(r?".min":"")+".js")];Promise.all(o).finally(function(){app.addPage("polyfillPage",l).loadCss(t,e),app.settings.usingWebComponentsPolyfill=!0,app.controls["json-data"].onFetch=function(){app.activeModel=this,app.activeController&&app.activeController.modelName&&(app.models[app.activeController.modelName]=app.activeModel),n()},function(){var t=document.querySelector("url-hash-router"),e="url-hash-route";if(null===t){if(null===(t=document.querySelector("url-router")))return;e="url-route",document.documentElement.setAttribute("data-routing-mode","history")}var a=t.querySelectorAll(e),r=0;Array.prototype.forEach.call(a,function(t){var e=t.getAttribute("path");null!==t.getAttribute("default-route")&&(app.settings.defaultRoute=e);var a=t.getAttribute("redirect");if(null===a){var o,l=t.getAttribute("src");if(null===l){l=void 0;var n=t.querySelector("template");if(null===n)return app.showErrorAlert("Unable to setup route:"),void console.log(t);n.id||(n.id="url-hash-route-template-"+r+"-"+(new Date).getTime(),r++),o=n.id}app.addController({path:e,viewId:o,viewUrl:l,viewEngine:"Text",pageType:"polyfillPage"})}else app.addController({path:e,onRendered:function(){app.changeRoute(this.redirect)},settings:{redirect:a}})}),app.setup()}(),document.querySelector("url-hash-router, url-router")||(app.activeModel={},app.onUpdateViewComplete=function(){l.onRendered()},app.updateTemplatesForIE(),app.updateView())})}document.addEventListener("DOMContentLoaded",function(){var t=null;void 0!==window.app&&"object"==typeof window.app.plugins&&(t=window.app.plugins,delete window.app),function(){if("string"==typeof window.dataformsjsUrl)return a=window.dataformsjsUrl,void(r=!1!==window.dataformsjsMinFiles);for(var t=["/web-components/polyfill.min.js","/web-components/polyfill.js"],e=0;e<2;e++){var o,l=document.querySelector('script[src$="'+t[e]+'"]');if(l)return o=l.getAttribute("src"),a=o.substr(0,o.length-t[e].length+1),void(r=0===e)}a="https://cdn.jsdelivr.net/npm/dataformsjs@latest/js/",r=!0}(),function(t,e){var a=document.createElement("script");a.onload=e,a.onerror=function(){console.error("Error loading Script: "+t),e()},a.src=t,document.head.appendChild(a)}(a+"DataFormsJS"+(r?".min":"")+".js",function(){if(null!==t)for(var e in t)t.hasOwnProperty(e)&&app.addPlugin(e,t[e]);var a=!!(Array.from&&window.Promise&&window.fetch&&Promise.prototype.finally);app.loadScript(a,app.settings.polyfillUrl,i)})})}();