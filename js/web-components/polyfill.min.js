!function(){"use strict";var t=["template { display:none }","[data-control] { display:block; padding:0; margin:0; }",'div[data-control="json-data"] > div.is-loading,','div[data-control="json-data"] > div.has-error,','div[data-control="json-data"] > div.is-loaded { padding:0; margin:0; }'].join("\n"),e=null,a=null,o={dataAttributes:function(t,e){e.forEach(function(e){var a=t.getAttribute(e);null!==a&&t.setAttribute("data-"+e,a)})},jsonData:function(t){o.dataAttributes(t,["url","load-only-once","click-selector"]);["is-loading","has-error","is-loaded"].forEach(function(e){var a=t.querySelector(e);if(a){var o=document.createElement("div");o.className=a.className,o.classList.add(e);var r=a.getAttribute("template-selector");for(r&&o.setAttribute("data-template-selector",r);a.firstChild;)o.appendChild(a.removeChild(a.firstChild));a.parentNode.replaceChild(o,a)}})},dataList:function(t){o.dataAttributes(t,["template-selector","root-element","root-attr","error-class","template-returns-html","list-item-name"])},dataTable:function(t){o.dataAttributes(t,["highlight-class","labels","columns","table-attr","highlight-class"])},imageGallery:function(t){t.setAttribute("data-image-gallery",t.getAttribute("image")),o.dataAttributes(t,["image-avif","image-webp"]);var e=t.getAttribute("title");if(null===e){var a=t.querySelector("img[alt]");a&&(e=a.getAttribute("alt"),t.setAttribute("title",e))}},inputFilter:function(t){o.dataAttributes(t,["filter-selector","filter-results-text-all","filter-results-text-filtered"]);var e=t.getAttribute("filter-results-selector");e&&t.setAttribute("data-filter-results-text-selector",e)},leafletMap:function(t){t.setAttribute("data-leaflet",""),o.dataAttributes(t,["latitude","longitude","zoom","marker"]);var e=t.getAttribute("data-bind-attr");e&&!e.includes("data-")&&(e=e.split(",").map(function(t){return"data-"+t.trim()}),t.setAttribute("data-bind-attr",e.join(", ")))},navLinks:function(){var t=document.querySelector('nav[is="spa-links"]');if(t){var e=t.getAttribute("item-selector");e&&(app.plugins.navLinks.itemSelector='nav[is="spa-links"] '+e);var a=t.getAttribute("active-class");a&&(app.plugins.navLinks.activeClass=a)}}},r={model:{},onRendered:function(){var t=this,e=document.querySelectorAll("[url-param]");Array.prototype.forEach.call(e,function(e){var a=e.getAttribute("url-param");void 0!==t[a]&&(e.textContent=t[a])}),e=document.querySelectorAll("[url-attr-param]"),Array.prototype.forEach.call(e,function(e){app.plugins.dataBind.bindAttrTmpl(e,"url-attr-param",t)}),i(document,"app:routeChanged",{url:app.activeController&&app.activeController.path?app.activeController.path:null,urlParams:app.activeParameterList});var a=!1;app.activeJsControls.forEach(function(t){"json-data"===t.control&&(o.jsonData(t.element),app.loadJsControl(t),a=!0)}),a||l(document)}};function l(t){var e=[];app.activeJsControls.forEach(function(t){switch(t.control){case"data-table":o.dataTable(t.element),app.loadJsControl(t);break;case"data-list":o.dataList(t.element),app.loadJsControl(t)}}),document.querySelector("[data-bind]")&&app.plugins.dataBind.reload(),[{selector:".click-to-highlight",plugin:"clickToHighlight"},{selector:"[data-sort]",plugin:"sort"},{selector:'[is="spa-links"]',plugin:"navLinks",after:o.navLinks},{selector:'[is="input-filter"]',plugin:"filter",update:o.inputFilter},{selector:'[is="leaflet-map"]',plugin:"leaflet",update:o.leafletMap},{selector:"image-gallery",plugin:"imageGallery",update:o.imageGallery},{selector:"[data-enter-key-click-selector]",plugin:"keydownAction"}].forEach(function(t){if(document.querySelector(t.selector)&&(void 0===typeof t.after?e.push(t.plugin):e.push({name:t.plugin,callback:t.after}),void 0!==t.update)){var a=document.querySelectorAll(t.selector);Array.prototype.forEach.call(a,function(e){t.update(e)})}}),e.forEach(function(t){"string"==typeof t?p(t):p(t.name,t.callback)}),i(t,"app:contentReady"),t!==document&&"json-data"===t.getAttribute("data-control")&&n(t.getAttribute("onready"),"json-data","onready")}function n(t,e,a){if(t)try{var o=new Function("return "+t)();"function"==typeof o&&o()}catch(o){app.showErrorAlert("Error from function <"+e+" "+a+'="'+t+'">: '+o.message),console.error(o)}}function i(t,e,a){var o;void 0===a?"function"==typeof Event?o=new Event(e,{bubbles:!0}):(o=document.createEvent("Event")).initEvent(e,!0,!1):"function"==typeof CustomEvent?o=new CustomEvent(e,{bubbles:!0,detail:a}):(o=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!1,a),t.dispatchEvent(o),"app:routeChanged"===e&&app.activeController&&app.activeController.settings&&app.activeController.settings.onload&&n(app.activeController.settings.onload,"url-route","onload")}function p(t,o){if(void 0!==app.plugins[t])return void 0!==o&&o(),void app.plugins[t].reload();var r=e+"plugins/"+t+(a?".min":"")+".js";app.loadScripts(r).then(function(){void 0!==app.plugins[t]?(void 0!==o&&o(),app.plugins[t].reload()):console.warn("Plugin ["+t+"] was loaded but not found. The script might still be loading in the DOM.")})}function s(){var t=[app.loadScripts(e+"controls/data-list"+(a?".min":"")+".js"),app.loadScripts(e+"controls/data-table"+(a?".min":"")+".js"),app.loadScripts(e+"controls/json-data"+(a?".min":"")+".js"),app.loadScripts(e+"extensions/format"+(a?".min":"")+".js"),app.loadScripts(e+"extensions/jsTemplate"+(a?".min":"")+".js"),app.loadScripts(e+"plugins/dataBind"+(a?".min":"")+".js")],o=document.querySelector("i18n-service");if(o){t.push(app.loadScripts(e+"plugins/i18n"+(a?".min":"")+".js"));[{web:"default-locale",plugin:"data-i18n-default"},{web:"file",plugin:"data-i18n-file"},{web:"locales",plugin:"data-i18n-locales"},{web:"file-dir",plugin:"data-i18n-dir"}].forEach(function(t){var e=o.getAttribute(t.web);e&&document.documentElement.setAttribute(t.plugin,e)})}Promise.all(t).finally(function(){if(app.settings.usingWebComponentsPolyfill=!0,o){var t=Object.keys(app.plugins);if("i18n"!==t[0]){var e={i18n:app.plugins.i18n};t.forEach(function(t){"i18n"!==t&&(e[t]=app.plugins[t])}),app.plugins=e}}app.controls["json-data"].onFetch=function(t,e){app.activeController&&app.activeController.modelName?(e||app.deepClone(app.models[app.activeController.modelName],this),app.activeModel=app.models[app.activeController.modelName]):app.activeModel=this,l(t)};var a=document.querySelector("url-router");null===a?(app.activeModel={},app.onUpdateViewComplete=function(){r.onRendered()},app.updateView()):(app.addPage("polyfillPage",r),function(t){function e(t,e){i(t,"app:error",e),i(t,"app:routeChanged",{url:app.activeController&&app.activeController.path?app.activeController.path:null,urlParams:app.activeParameterList}),app.showError(t,e),console.error(e)}if("history"===t.getAttribute("mode")&&document.documentElement.setAttribute("data-routing-mode","history"),app.settings.viewSelector=t.getAttribute("view-selector"),app.settings.lazyTemplateSelector=t.getAttribute("loading-template-selector"),null!==app.settings.viewSelector)if(null!==document.querySelector(app.settings.viewSelector)){if(void 0!==window.lazyLoad)for(var a in window.lazyLoad)if(window.lazyLoad.hasOwnProperty(a)){var o=window.lazyLoad[a];Array.isArray(o)||"string"==typeof o?app.lazyLoad[a]=o:"string"==typeof o.nomodule?app.lazyLoad[a]=o.nomodule:"string"!=typeof o.module&&console.error("Unhandled window.lazyLoad Script: "+a)}var r=t.querySelectorAll("url-route"),l=0;Array.prototype.forEach.call(r,function(a){var o=a.getAttribute("path");if(null===o)return e(t,"Error, element <"+a.tagName.toLowerCase()+"> is missing attribute [path]"),void console.log(a);null!==a.getAttribute("default-route")&&(app.settings.defaultRoute=o);var r=a.getAttribute("redirect");if(null===r){var n,i=a.getAttribute("src");if(null===i||""===i){i=void 0;var p=a.querySelector("template");if(null===p)return app.showErrorAlert("Missing <template> or [src] attribute for route <"+a.tagName.toLowerCase()+' path="'+o+'">.'),void console.log(a);p.id||(p.id="url-route-template-"+l+"-"+(new Date).getTime(),l++),n=p.id}var s={lazyLoad:[],onload:a.getAttribute("onload")},d=a.getAttribute("lazy-load");null!==d&&(d=d.split(",").map(function(t){return t.trim()}),s.lazyLoad=d.filter(function(t){return void 0!==app.lazyLoad[t]}).join(", "));var u=0===Object.keys(s.lazyLoad).length;u&&null===s.onload?s=void 0:u&&delete s.lazyLoad,app.addController({path:o,viewId:n,viewUrl:i,viewEngine:"Text",pageType:"polyfillPage",settings:s})}else app.addController({path:o,onRendered:function(){app.changeRoute(this.redirect)},settings:{redirect:r}})}),app.setup()}else e(t,'Error, element from <url-router view-selector="'+app.escapeHtml(app.settings.viewSelector)+'"> was not found on the page.');else e(t,"Error, element <"+t.tagName.toLowerCase()+"> is missing attribute [view-selector]")}(a))})}document.addEventListener("DOMContentLoaded",function(){var o=null;void 0!==window.app&&"object"==typeof window.app.plugins&&void 0===window.DataFormsJS&&(o=window.app.plugins,delete window.app),function(){if("string"==typeof window.dataformsjsUrl)return e=window.dataformsjsUrl,void(a=!1!==window.dataformsjsMinFiles);for(var t=["/web-components/polyfill.min.js","/web-components/polyfill.js"],o=0;o<2;o++){var r,l=document.querySelector('script[src$="'+t[o]+'"]');if(l)return r=l.getAttribute("src"),e=r.substr(0,r.length-t[o].length+1),void(a=0===o)}e="https://cdn.jsdelivr.net/npm/dataformsjs@latest/js/",a=!0}(),function(t,e){var a=document.createElement("script");a.onload=e,a.onerror=function(){console.error("Error loading Script: "+t),e()},a.src=t,document.head.appendChild(a)}(e+"DataFormsJS"+(a?".min":"")+".js",function(){if(app.loadCss("web-components-polyfill-css",t),null!==o)for(var e in o)o.hasOwnProperty(e)&&app.addPlugin(e,o[e]);var a=!!(Array.from&&window.Promise&&window.fetch&&Promise.prototype.finally);app.loadScript(a,app.settings.polyfillUrl,s)})})}();