const shadowTmpl=document.createElement("template");shadowTmpl.innerHTML="\n    <style>:host { display:block; cursor:pointer; }</style>\n    <slot></slot>\n";const overlayStyleId="image-gallery-css",overlayStyleCss="\n    body.blur { filter: blur(3px); }\n\n    .image-gallery-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(255,255,255,.8);\n        cursor: pointer;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        flex-direction: column;\n    }\n\n    .image-gallery-overlay .image-gallery-loading {\n        font-weight: bold;\n        padding: 10px 20px;\n        background-color: rgba(255,255,255,.4);\n        position: absolute;\n    }\n\n    .image-gallery-overlay img {\n        max-width: 100%;\n        max-height: 100%;\n        flex-shrink: 0;\n    }\n\n    .image-gallery-overlay div {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        z-index: 2;\n        font-weight: bold;\n        display: flex;\n        justify-content: space-between;\n        width: 100%;\n    }\n\n    .image-gallery-overlay div span {\n        padding: 10px 20px;\n        background-color: rgba(255,255,255,.4);\n    }\n\n    @media (min-width: 1300px) {\n        .image-gallery-overlay div {\n            left: calc((100% - 1300px) /2);\n            right: auto;\n            max-width: 1300px;\n        }\n    }\n";let supportsPassive=!1;try{const e=Object.defineProperty({},"passive",{get:function(){return supportsPassive=!0,!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(e){}let images=null,imageIndex=null,imageCount=0,overlay=null,overlayImg=null,overlayTitle=null,overlayIndex=null,overlayLoading=null,touchStartX=null,loadingTimeoutId=null;const defaultLoadingText="Loading...",defaultLoadingTimeout=2e3,loadedImages=new Set;function showOverlay(){const e=images[imageIndex].getAttribute("image"),n=getImageTitle(images[imageIndex]),t=images[imageIndex].getAttribute("loading-text");loadCss(),(overlay=document.createElement("div")).className="image-gallery-overlay",(overlayLoading=document.createElement("span")).className="image-gallery-loading",overlayLoading.textContent=t||defaultLoadingText,overlayLoading.setAttribute("hidden",""),overlay.appendChild(overlayLoading),(overlayImg=document.createElement("img")).addEventListener("load",()=>{loadedImages.add(e),clearLoadingTimer(),overlayLoading.setAttribute("hidden",""),preloadNextImages()}),overlayImg.src=e,overlay.appendChild(overlayImg);const a=document.createElement("div");(overlayTitle=document.createElement("span")).textContent=n,overlayTitle.style.display=n?"":"none",a.appendChild(overlayTitle),(overlayIndex=document.createElement("span")).textContent=`${imageIndex+1}/${imageCount}`,a.appendChild(overlayIndex),overlay.appendChild(a),addOverlayEvents(),document.documentElement.appendChild(overlay),document.querySelector("body").classList.add("blur"),startLoadingTimer()}function getImageTitle(e){let n=e.getAttribute("title");if(null===n){const t=e.querySelector("img[alt]");t&&(n=t.getAttribute("alt"))}return n}function startLoadingTimer(){clearLoadingTimer();const e=images[imageIndex].getAttribute("loading-timeout"),n=null===e?defaultLoadingTimeout:parseInt(e,10);loadingTimeoutId=window.setTimeout(function(){loadingTimeoutId=null,null!==overlayLoading&&overlayLoading.removeAttribute("hidden")},n)}function clearLoadingTimer(){null!==loadingTimeoutId&&(window.clearTimeout(loadingTimeoutId),loadingTimeoutId=null)}function loadCss(){let e=document.getElementById(overlayStyleId);null===e&&((e=document.createElement("style")).id=overlayStyleId,e.innerHTML=overlayStyleCss,document.head.appendChild(e))}function addOverlayEvents(){overlay.onclick=function(e){if("ontouchstart"in window){const n=window.innerHeight,t=n/4,a=n-t;if(e.clientY>=t&&e.clientY<=a)return}hideOverlay()},document.addEventListener("keydown",handleDocKeyDown),overlay.addEventListener("touchstart",function(e){touchStartX=e.changedTouches[0].screenX},!!supportsPassive&&{passive:!0}),overlay.addEventListener("touchend",e=>{var n=e.changedTouches[0].screenX;n>touchStartX?changeImage("left"):n<touchStartX&&changeImage("right")})}function handleDocKeyDown(e){switch(e.key){case"ArrowLeft":changeImage("left");break;case"ArrowRight":changeImage("right");break;case"Escape":hideOverlay()}}function hideOverlay(){clearLoadingTimer(),overlay.parentNode.removeChild(overlay),overlayLoading=null,overlayIndex=null,overlayTitle=null,overlayImg=null,overlay=null,document.removeEventListener("keydown",handleDocKeyDown),document.querySelector("body").classList.remove("blur")}function preloadNextImages(){let e=imageIndex-1;if(-1===e&&(e=imageCount-1),e!==imageIndex){const n=images[e].getAttribute("image");if(n&&!loadedImages.has(n)){const e=new Image;e.onload=(()=>{loadedImages.add(n)}),e.src=n}}let n=imageIndex+1;if(n===imageCount&&(n=0),n!==imageIndex){const e=images[n].getAttribute("image");if(e&&!loadedImages.has(e)){const n=new Image;n.onload=(()=>{loadedImages.add(e)}),n.src=e}}}function changeImage(e){const n=getImageTitle(images[imageIndex="right"===e?imageIndex===imageCount-1?0:imageIndex+1:0===imageIndex?imageCount-1:imageIndex-1]);overlayImg.src="",overlayImg.src=images[imageIndex].getAttribute("image"),overlayTitle.textContent=n,overlayTitle.style.display=n?"":"none",overlayIndex.textContent=`${imageIndex+1}/${imageCount}`,startLoadingTimer()}window.customElements.define("image-gallery",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}).appendChild(shadowTmpl.content.cloneNode(!0)),this.addEventListener("click",this.handleClick)}handleClick(){null!==this.getAttribute("image")?(images=document.querySelectorAll("image-gallery[image]"),imageIndex=Array.from(images).indexOf(this),imageCount=images.length,showOverlay()):console.error("Unable to view large image because <image-gallery> attribute [image] is missing.")}});