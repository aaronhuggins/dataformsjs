window.Markdown = class Markdown extends React.Component{constructor(t){super(t),this.state={content:"string"!=typeof t.content?null:t.content,errorMessage:null,isLoaded:!1},this._isMounted=!1,this._returnCode=!1,this.fetchContent=this.fetchContent.bind(this),this.highlight=this.highlight.bind(this),this.updateCodeBlocks=this.updateCodeBlocks.bind(this),this.markdownEl=React.createRef()}componentDidMount(){this._isMounted=!0,this.props.url&&null===this.state.content?this.fetchContent():this.updateCodeBlocks()}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(t){this.props.url&&t.url!==this.props.url?this.fetchContent():this.updateCodeBlocks()}fetchContent(){fetch(this.props.url,this.props.fetchOptions).then((t=>{const e=t.status;if(e>=200&&e<300||304===e)return Promise.resolve(t);{const s=`Error loading markdown content from [${this.props.url}]. Server Response Code: ${e}, Response Text: ${t.statusText}`;return Promise.reject(s)}})).then((t=>t.text())).then((t=>{this._isMounted&&this.setState({content:t,errorMessage:null,isLoaded:!0})})).catch((t=>{this._isMounted&&this.setState({errorMessage:t})}))}highlight(t,e){const s=this.props.hljs||window.hljs;if(void 0===s)return this._returnCode?t:"";if(e&&s.getLanguage(e))try{return s.highlight(e,t).value}catch(t){console.warn(t)}try{return s.highlightAuto(t).value}catch(t){console.warn(t)}return this._returnCode?t:""}updateCodeBlocks(){if(!this._isMounted||!this.markdownEl.current)return;if(void 0!==(this.props.hljs||window.hljs)){const t=this.markdownEl.current.querySelectorAll('code[class*="language-"]');for(let e=0,s=t.length;e<s;e++)t[e].classList.add("hljs")}}render(){if(this.state.errorMessage){const t=(this.props.className?this.props.className:"")+" error",e="object"==typeof this.props.errorStyle?this.props.errorStyle:{backgroundColor:"red",color:"#fff",fontWeight:"bold",border:"1px solid darkred",padding:"1em"};return React.createElement("div",{className:t,ref:this.markdownEl,style:e},this.state.errorMessage)}if(this.props.url&&!this.state.isLoaded)return this.props.isLoading?this.props.isLoading:null;if(null===this.state.content)return null;if(this.props.showSource)return React.createElement("div",{className:this.props.className,ref:this.markdownEl},React.createElement("pre",null,this.state.content));let t,e;if(this._returnCode=!1,this.props.marked||window.marked){this._returnCode=!0;const e=this.props.marked||window.marked;e.setOptions({highlight:this.highlight}),t=e(this.state.content)}else if(this.props.markdownit||window.markdownit){if(e=(this.props.markdownit||window.markdownit)({html:!0,linkify:!0,typographer:!0,highlight:this.highlight}),this.props.markdownitEmoji||window.markdownitEmoji){const t=this.props.markdownitEmoji||window.markdownitEmoji;e.use(t)}t=e.render(this.state.content)}else{if(!this.props.Remarkable&&!window.remarkable)throw new Error("Error - Unable to show Markdown content because a Markdown JavaScript library was not found on the page.");{e=new(this.props.Remarkable||window.remarkable.Remarkable)({html:!0,typographer:!0,highlight:this.highlight});const s=this.props.linkify||window.remarkable.linkify;s&&e.use(s),t=e.render(this.state.content)}}return React.createElement("div",{className:this.props.className,dangerouslySetInnerHTML:{__html:t},ref:this.markdownEl})}}