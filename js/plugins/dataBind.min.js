!function(){"use strict";function l(t){null===app.activeModel&&(app.activeModel={});var e=t.target.type,a="checkbox"===e||"radio"===e?t.target.checked:t.target.value,r=t.target.getAttribute("data-bind");if(-1===r.indexOf("."))app.activeModel[r]=a;else{var n=r.split("."),i="window"===n[0],o=i?window:app.activeModel;for(i&&n.splice(0,1);0<n.length;)r=n[0],1===n.length?o[r]=a:("object"!=typeof o[r]&&(o[r]={}),o=o[r]),n.splice(0,1)}}var u={getBindValue:function(t,e){if(void 0===e)e=app.activeModel;else{if(null===e)return null;if(null===t)throw new Error("Missing [data-bind] attribute.")}for(var a=t.split("."),r=1<a.length&&"window"===a[0]?window:e,n=0,i=a.length;n<i;n++)r="object"==typeof r&&null!==r?r[a[n]]:null;return void 0===r?null:r},bindAttrTmpl:function(l,d,c){l.getAttribute(d).split(",").map(function(t){return t.trim()}).forEach(function(t){var e=l.getAttribute(d+"-"+t);if(null===e&&null!==(e=l.getAttribute(t))&&l.setAttribute(d+"-"+t,e),null!==e){for(var a=0;a<100;){var r=e.indexOf("["),n=e.indexOf("]");if(-1===r||-1===n||n<r)break;var i=e.substring(r+1,n),o=u.getBindValue(i,c);null===o&&(o=""),e=e.substring(0,r)+o+e.substring(n+1),a++}l.setAttribute(t,e)}})},onRendered:function(t){void 0===t&&(t=document);var e=t.querySelectorAll("[data-bind]");Array.prototype.forEach.call(e,function(t){var e=t.getAttribute("data-bind");if(""!==e){var a=u.getBindValue(e),r=t.nodeName;if("INPUT"===r||"SELECT"===r||"TEXTAREA"===r){var n=t.type;"checkbox"===n||"radio"===n?"boolean"==typeof a?t.checked=a:(a=String(a).toLowerCase(),t.checked="1"===a||"true"===a||"yes"===a||"y"===a):t.value=a,l({target:t});var i=void 0===t.oninput?"change":"input";t.addEventListener(i,l)}else if(null===t.getAttribute("data-control")&&-1===t.tagName.indexOf("-")){var o=t.getAttribute("data-format");if(null!==o)if(void 0!==app.format&&"function"==typeof app.format[o])a=app.format[o](a);else if("function"==typeof window[o])try{a=window[o](a)}catch(t){console.error(t),a="Error: "+t.message}else a="Error: Unhandled format function ["+o+"]",console.warn("Check if the script [js/extensions/format.js] should be included or if a function is missing.");t.textContent=a}}else console.warn("Element has a [data-bind] attribute, but no field specified")}),e=t.querySelectorAll("[data-bind-attr]"),Array.prototype.forEach.call(e,function(t){u.bindAttrTmpl(t,"data-bind-attr",app.activeModel)}),e=t.querySelectorAll("[data-show]"),Array.prototype.forEach.call(e,function(e){if(null===app.activeModel||app.activeModel&&!0===app.activeModel.isLoading)e.style.display="none";else{var t=e.getAttribute("data-show");try{var a=new Function("state","format","with(state){return "+t+"}")(app.activeModel,app.format);e.style.display=!0===a?"":"none"}catch(t){e.style.display="",console.error("Error evaluating JavaScript expression from [data-show] attribute."),console.error(t)}}})}};app.addPlugin("dataBind",u)}();