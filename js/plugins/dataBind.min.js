!function(){"use strict";function n(t){null===app.activeModel&&(app.activeModel={});var e=t.target.type,a="checkbox"===e||"radio"===e?t.target.checked:t.target.value,n=t.target.getAttribute("data-bind");if(-1===n.indexOf("."))app.activeModel[n]=a;else{var i=n.split("."),e="window"===i[0],r=e?window:app.activeModel;for(e&&i.splice(0,1);0<i.length;)n=i[0],1===i.length?r[n]=a:("object"!=typeof r[n]&&(r[n]={}),r=r[n]),i.splice(0,1)}}var c={getBindValue:function(t,e){if(void 0===e)e=app.activeModel;else{if(null===e)return null;if(null===t)throw new Error("Missing [data-bind] attribute.")}for(var a=t.split("."),n=1<a.length&&"window"===a[0]?window:e,i=0,r=a.length;i<r;i++)n="object"==typeof n&&null!==n?n[a[i]]:null;return void 0===n?null:n},bindAttrTmpl:function(o,l,d){o.getAttribute(l).split(",").map(function(t){return t.trim()}).forEach(function(t){var e=o.getAttribute(l+"-"+t);if(null===e&&null!==(e=o.getAttribute(t))&&o.setAttribute(l+"-"+t,e),null!==e){for(var a=0;a<100;){var n=e.indexOf("["),i=e.indexOf("]");if(-1===n||-1===i||i<n)break;var r=e.substring(n+1,i),r=c.getBindValue(r,d);null===r&&(r=""),e=e.substring(0,n)+r+e.substring(i+1),a++}o.setAttribute(t,e)}})},onRendered:function(t){var e=(t=void 0===t?document:t).querySelectorAll("[data-bind]");Array.prototype.forEach.call(e,function(t){var e=t.getAttribute("data-bind");if(""!==e){var e=c.getBindValue(e),a=t.nodeName;if("INPUT"===a||"SELECT"===a||"TEXTAREA"===a){a=t.type,a=("checkbox"===a||"radio"===a?"boolean"==typeof e?t.checked=e:(e=String(e).toLowerCase(),t.checked="1"===e||"true"===e||"yes"===e||"y"===e):t.value=e,n({target:t}),void 0===t.oninput?"change":"input");t.addEventListener(a,n)}else if(null===t.getAttribute("data-control")&&-1===t.tagName.indexOf("-")){a=t.getAttribute("data-format");if(null!==a)if(void 0!==app.format&&"function"==typeof app.format[a])e=app.format[a](e);else if("function"==typeof window[a])try{e=window[a](e)}catch(t){console.error(t),e="Error: "+t.message}else e="Error: Unhandled format function ["+a+"]",console.warn("Check if the script [js/extensions/format.js] should be included or if a function is missing.");t.textContent=e}}else null===t.getAttribute("data-control")&&-1===t.tagName.indexOf("-")&&console.warn("Element has a [data-bind] attribute, but no field specified")}),e=t.querySelectorAll("[data-bind-attr]"),Array.prototype.forEach.call(e,function(t){c.bindAttrTmpl(t,"data-bind-attr",app.activeModel)}),e=t.querySelectorAll("[data-show]"),Array.prototype.forEach.call(e,function(e){if(null===app.activeModel||app.activeModel&&!0===app.activeModel.isLoading)e.style.display="none";else{var t=e.getAttribute("data-show");try{var a=new Function("state","format","with(state){return "+t+"}")(app.activeModel,app.format);e.style.display=!0===a?"":"none"}catch(t){e.style.display="",void 0!==app.activeModel.isLoading&&(console.warn("Error evaluating JavaScript expression from [data-show] attribute."),console.warn(t))}}})}};app.addPlugin("dataBind",c)}();