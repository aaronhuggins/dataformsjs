!function(){"use strict";var e=["body.blur { filter: blur(3px); }",".image-gallery-overlay {","    position: fixed;","    top: 0;","    left: 0;","    right: 0;","    bottom: 0;","    background-color: rgba(255,255,255,.8);","    cursor: pointer;","    display: flex;","    justify-content: center;","    align-items: center;","}",".image-gallery-overlay img {","    max-width: 100%;","    max-height: 100%;","}"].join("\n"),n={images:[],imageSrcAttr:"data-image-gallery",overlay:null,overlayImg:null,imageCount:0,imageIndex:-1,touchStartX:0,onRendered:function(){this.images=document.querySelectorAll("["+n.imageSrcAttr+"]"),this.imageCount=this.images.length;var e=0;Array.prototype.forEach.call(this.images,function(t){t.addEventListener("click",function(){var e=parseInt(t.getAttribute("data-index"),10);n.showOverlay(e)}),t.setAttribute("data-index",e),e++}),0!==this.imageCount&&document.addEventListener("keydown",n.handleKeyDown)},onRouteUnload:function(){null!==this.overlay&&this.hideOverlay(),this.images=[],document.removeEventListener("keydown",n.handleKeyDown)},handleKeyDown:function(e){if(n.overlay)switch(e.key){case"ArrowLeft":n.changeImage("left");break;case"ArrowRight":n.changeImage("right");break;case"Escape":n.hideOverlay()}},showOverlay:function(e){this.overlay=document.createElement("div"),this.overlay.className="image-gallery-overlay",this.overlayImg=document.createElement("img"),this.overlayImg.addEventListener("load",this.preloadNextImages.bind(this)),this.overlayImg.src=this.getImageSource(e),this.imageIndex=e,this.overlay.appendChild(this.overlayImg),this.addOverlayEvents(),document.documentElement.appendChild(this.overlay),document.querySelector("body").classList.add("blur")},addOverlayEvents:function(){this.overlay.onclick=this.hideOverlay.bind(this),this.overlay.addEventListener("touchstart",function(e){n.touchStartX=e.changedTouches[0].screenX}),this.overlay.addEventListener("touchend",function(e){var t=e.changedTouches[0].screenX;t>n.touchStartX?n.changeImage("left"):t<n.touchStartX&&n.changeImage("right")})},hideOverlay:function(){this.overlay.parentNode.removeChild(this.overlay),this.overlayImg=null,this.overlay=null,document.querySelector("body").classList.remove("blur")},getImageSource:function(e){return this.images[e].getAttribute(n.imageSrcAttr)},changeImage:function(e){this.imageIndex="right"===e?this.imageIndex===this.imageCount-1?0:this.imageIndex+1:0===this.imageIndex?this.imageCount-1:this.imageIndex-1,this.overlayImg.src="",this.overlayImg.src=this.getImageSource(this.imageIndex)},preloadNextImages:function(){var e,t=this.imageIndex-1;-1===t&&(t=this.imageCount-1),t===this.imageIndex||null!==(e=this.images[t].getAttribute(n.imageSrcAttr))&&((new Image).src=e);var a,i=this.imageIndex+1;i===this.imageCount&&(i=0),i===this.imageIndex||null!==(a=this.images[i].getAttribute(n.imageSrcAttr))&&((new Image).src=a)}};app.addPlugin("imageGallery",n).loadCss("image-gallery-css",e)}();