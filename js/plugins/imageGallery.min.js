!function(){"use strict";var e=["body.blur { filter: blur(3px); }",".image-gallery-overlay {","    position: fixed;","    top: 0;","    left: 0;","    right: 0;","    bottom: 0;","    background-color: rgba(255,255,255,.8);","    cursor: pointer;","    display: flex;","    justify-content: center;","    align-items: center;","    flex-direction: column;","}",".image-gallery-overlay img {","    max-width: 100%;","    max-height: 100%;","    flex-shrink: 0;","}",".image-gallery-overlay div {","    position: absolute;","    bottom: 0;","    left: 0;","    right: 0;","    z-index: 2;","    font-weight: bold;","    display: flex;","    justify-content: space-between;","    width: 100%;","}",".image-gallery-overlay div span {","    padding: 10px 20px;","}"].join("\n"),t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return t=!0}});window.addEventListener("testPassive",null,i),window.removeEventListener("testPassive",null,i)}catch(e){}var l={images:[],imageSrcAttr:"data-image-gallery",overlay:null,overlayImg:null,overlayTitle:null,overlayIndex:null,imageCount:0,imageIndex:-1,touchStartX:0,loadedImages:[],onRendered:function(e){var i;0<this.images.length||(e=void 0===e?document:e,this.images=e.querySelectorAll("["+l.imageSrcAttr+"]"),this.imageCount=this.images.length,i=0,Array.prototype.forEach.call(this.images,function(t){t.addEventListener("click",function(){var e=parseInt(t.getAttribute("data-index"),10);l.showOverlay(e)}),t.setAttribute("data-index",i),i++}),0!==this.imageCount&&document.addEventListener("keydown",l.handleKeyDown))},onRouteUnload:function(){null!==this.overlay&&this.hideOverlay(),this.images=[],document.removeEventListener("keydown",l.handleKeyDown)},handleKeyDown:function(e){if(l.overlay)switch(e.key){case"ArrowLeft":case"Left":l.changeImage("left");break;case"ArrowRight":case"Right":l.changeImage("right");break;case"Escape":case"Esc":l.hideOverlay()}},showOverlay:function(e){var t=this.getImageSource(e),i=this.images[e].getAttribute("title");this.overlay=document.createElement("div"),this.overlay.className="image-gallery-overlay",this.overlayImg=document.createElement("img"),this.overlayImg.addEventListener("load",function(){-1===l.loadedImages.indexOf(t)&&l.loadedImages.push(t),l.preloadNextImages()}),this.overlayImg.src=t,this.imageIndex=e,this.overlay.appendChild(this.overlayImg);var a=document.createElement("div");this.overlayTitle=document.createElement("span"),this.overlayTitle.textContent=i,this.overlayTitle.style.display=i?"":"none",a.appendChild(this.overlayTitle),this.overlayIndex=document.createElement("span"),this.overlayIndex.textContent=e+1+"/"+this.imageCount,a.appendChild(this.overlayIndex),this.overlay.appendChild(a),this.addOverlayEvents(),document.documentElement.appendChild(this.overlay),document.querySelector("body").classList.add("blur")},addOverlayEvents:function(){this.overlay.onclick=function(e){if("ontouchstart"in window){var t=window.innerHeight,i=t/4,a=t-i;if(e.clientY>=i&&e.clientY<=a)return}l.hideOverlay()},this.overlay.addEventListener("touchstart",function(e){l.touchStartX=e.changedTouches[0].screenX},!!t&&{passive:!0}),this.overlay.addEventListener("touchend",function(e){var t=e.changedTouches[0].screenX;t>l.touchStartX?l.changeImage("left"):t<l.touchStartX&&l.changeImage("right")})},hideOverlay:function(){this.overlay.parentNode.removeChild(this.overlay),this.overlayIndex=null,this.overlayTitle=null,this.overlayImg=null,this.overlay=null,document.querySelector("body").classList.remove("blur")},getImageSource:function(e){return this.images[e].getAttribute(l.imageSrcAttr)},changeImage:function(e){this.imageIndex="right"===e?this.imageIndex===this.imageCount-1?0:this.imageIndex+1:0===this.imageIndex?this.imageCount-1:this.imageIndex-1;var t=this.images[this.imageIndex].getAttribute("title");this.overlayImg.src="",this.overlayImg.src=this.getImageSource(this.imageIndex),this.overlayTitle.textContent=t,this.overlayTitle.style.display=t?"":"none",this.overlayIndex.textContent=this.imageIndex+1+"/"+this.imageCount},preloadNextImages:function(){var e,t,i=this.imageIndex-1;-1===i&&(i=this.imageCount-1),i===this.imageIndex||(e=this.getImageSource(i))&&-1===this.loadedImages.indexOf(e)&&((t=new Image).onload=function(){l.loadedImages.push(e)},t.src=e);var a,n,o=this.imageIndex+1;o===this.imageCount&&(o=0),o===this.imageIndex||(a=this.getImageSource(o))&&-1===this.loadedImages.indexOf(a)&&((n=new Image).onload=function(){l.loadedImages.push(a)},n.src=a)}};app.addPlugin("imageGallery",l).loadCss("image-gallery-css",e)}();