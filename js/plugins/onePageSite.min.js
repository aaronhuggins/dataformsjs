!function(){"use strict";var o={linkSelector:"[data-one-page]",activeLinkClass:"active",scrollToDelayOnPageLoad:500,useBrowserScrollIntoView:!1,_routeLoaded:!1,_isScrolling:!1,_targetElements:[],onAllowRouteChange:function(){return!this._routeLoaded||!this.scrollToHashElement()},onRendered:function(){o.useBrowserScrollIntoView?this.setup():(window.__forceSmoothScrollPolyfill__=!0,app.loadScripts("https://cdn.jsdelivr.net/npm/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js").then(function(){o.setup()})),document.addEventListener("scroll",o.handleScroll)},onRouteUnload:function(){this._routeLoaded=!1,this._isScrolling=!1,this._targetElements=[],document.removeEventListener("scroll",o.handleScroll)},elementIsVisible:function(t){var e=window.getComputedStyle(t);if("none"===e.display||"visible"!==e.visibility||parseFloat(e.opacity)<.1)return!1;var n=t.getBoundingClientRect();return!(0===n.width||0===n.height||n.left+n.width<0||n.top+n.height<0||n.top>window.innerHeight||n.left>window.innerWidth)},getVisibleHeightPx:function(t,e){var n,o=t.getBoundingClientRect(),i=o.bottom-o.top,l=0<=o.top&&o.top<e,s=0<o.bottom&&o.bottom<e,r=0;return l&&s?r=i:l?r=e-o.top:s?r=o.bottom:e<i&&o.top<0&&((n=Math.abs(o.top))<i&&(r=i-n)),r},handleScroll:function(){var t,e,n;o._isScrolling||0!==o._targetElements.length&&(o._targetElements.sort(function(t,e){return t.getBoundingClientRect().top-e.getBoundingClientRect().top}),0!==(t=o._targetElements.filter(function(t){return o.elementIsVisible(t)})).length&&(n="#"+(1<t.length?(e=[],t.forEach(function(t){e.push({pixelsOnScreen:o.getVisibleHeightPx(t,window.innerHeight),el:t})}),e.sort(function(t,e){return t.pixelsOnScreen-e.pixelsOnScreen}),e[e.length-1].el):t[0]).id,window.location.hash!==n&&(window.history.replaceState(null,null,n),o.setActiveLinks())))},scrollToHashElement:function(){var t=window.location.hash;if(t&&"#"===t[0]){var e=document.getElementById(t.substr(1));if(e)return window.setTimeout(function(){o._routeLoaded&&(o._isScrolling=!0,e.scrollIntoView({block:"start",behavior:"smooth"}),o.setActiveLinks(),window.setTimeout(function(){o._isScrolling=!1},500))},this.scrollToDelayOnPageLoad),!0}return!1},setup:function(){this._routeLoaded=!0,this.scrollToHashElement();var t=document.querySelectorAll(o.linkSelector);Array.prototype.forEach.call(t,function(t){t.addEventListener("click",o.handleLinkClick)}),o._targetElements=[],Array.prototype.forEach.call(t,function(t){var e;!t.hash||(e=document.getElementById(t.hash.substr(1)))&&-1===o._targetElements.indexOf(e)&&o._targetElements.push(e)})},setActiveLinks:function(){var t;o.activeLinkClass&&(t=document.querySelectorAll(o.linkSelector),Array.prototype.forEach.call(t,function(t){o.activeLinkClass&&(t.hash===window.location.hash?t.classList.add(o.activeLinkClass):t.classList.remove(o.activeLinkClass))}))},handleLinkClick:function(t){var e,n=this.hash;!n||(e=document.getElementById(n.substr(1)))&&(t.preventDefault(),o._isScrolling=!0,e.scrollIntoView({block:"start",behavior:"smooth"}),window.history.pushState(null,null,n),o.setActiveLinks(),window.setTimeout(function(){o._isScrolling=!1},500))}};app.addPlugin("onePageSite",o)}();