!function(){"use strict";var t={data:{bind:null,columns:null,labels:null,emptyDataText:"No records found",errorInvalidData:"Error invalid data for table",errorClass:null,defaultErrorStyle:"color:white; background-color:red; padding:0.5rem 1rem; margin:.5rem;",highlightClass:null,tableAttr:null,colClass:null,colLinkTemplate:null,colLinkFields:null,rowItemName:null},onLoad:function(e,t){var l,a,r,s,i,n,p,o,h,u=e.querySelector("template");function c(t){null===u?e.innerHTML=t:(function(){if(null===u)return e.innerHTML="";var t=e.querySelector("table");null!==t&&t.parentNode.removeChild(t)}(),e.insertAdjacentHTML("beforeend",t))}function d(t,e,l){c(e?'<table class="'+e+'}"><caption>'+app.escapeHtml(t)+"</caption></table>":'<table><caption style="display:block; '+l+'">'+app.escapeHtml(t)+"</caption></table>")}null===u&&(u=e.querySelector('script[type="text/x-template"]'));var m=t&&t[this.bind]?t[this.bind]:null;if(null===m&&void 0!==app.plugins.dataBind&&"function"==typeof app.plugins.dataBind.getBindValue&&(m=app.plugins.dataBind.getBindValue(this.bind,t)),null!==m)if(Array.isArray(m)&&0===m.length)null===this.emptyDataText?c('<table class="no-data"></table>'):c('<table class="no-data"><caption>'+app.escapeHtml(this.emptyDataText)+"</caption></table>");else{t=!0;if((!Array.isArray(m)||0<m.length&&"object"!=typeof m[0])&&(t=!1),t){if("string"==typeof this.columns)for(y=0,v=(a=this.columns.split(",")).length;y<v;y++)a[y]=a[y].trim();else a=Object.keys(m[0]);if(r=a,"string"==typeof this.labels){for(y=0,v=(r=this.labels.split(",")).length;y<v;y++)r[y]=r[y].trim();r.length!==a.length&&null===u&&(r=a)}var f=[],b="<table";if(this.tableAttr)for(var g=this.tableAttr.split(",").map(function(t){return t.trim()}),y=0,v=g.length;y<v;y++){var H=g[y],T=H.indexOf("=");1<T?(o=H.substr(0,T).trim(),h=H.substr(T+1).trim(),b+=" "+app.escapeHtml(o)+'="'+app.escapeHtml(h)+'"',"is"===o&&"sortable-table"===h&&(b+=" data-sort")):b+=" "+app.escapeHtml(H)}if(f.push(b+"><thead><tr>"),l=[],this.colClass){var t=this.colClass.split(",").map(function(t){return t.trim()}),C={};for(t.forEach(function(t){var e,l=t.indexOf("=");0<l&&(e=t.substr(0,l),l=t.substr(l+1),C[e]=l)}),y=0,v=r.length;y<v;y++){var j=r[y],L=null;void 0!==C[y.toString()]?L=C[y.toString()]:void 0!==C[j]&&(L=C[j]),L?l.push('<th class="'+app.escapeHtml(L)+'">'+app.escapeHtml(r[y])+"</th>"):l.push("<th>"+app.escapeHtml(r[y])+"</th>")}}else for(y=0,v=r.length;y<v;y++)l.push("<th>"+app.escapeHtml(r[y])+"</th>");if(f.push(l.join("")),f.push("</tr></thead>"),f.push("<tbody>"),null!==u)try{if(void 0===app.jsTemplate)throw Error("Error - When using <data-table> with a template the script [js/extensions/jsTemplate.js] is required.");for(var E=app.jsTemplate.compile(this.rowItemName,!1,u.innerHTML),S=0,k=m.length;S<k;S++){n=m[S];try{f.push(E(n,S,app.escapeHtml,app.format))}catch(t){this.errorClass?f.push('<tr class="'+this.errorClass+'">'):f.push('<tr style="'+this.defaultErrorStyle+'">'),f.push('<td colspan="'+a.length+'">Item Error - '+t.message+"}</td></tr>")}}}catch(t){return void d("Error Rendering Template - "+t.message,this.errorClass,this.defaultErrorStyle)}else{var x=this.colLinkTemplate,A=null;for(x&&(A=this.colLinkFields?this.colLinkFields.split(",").map(function(t){return t.trim()}):[a[0]]),i=a.length,y=0,v=m.length;y<v;y++){for((l=[]).push("<tr>"),s=0;s<i;s++)p=a[s],h=null===(h=(n=m[y])[p])?"":app.escapeHtml(h),x&&-1!==A.indexOf(p)?l.push('<td><a href="'+app.buildUrl(x,n)+'">'+app.escapeHtml(h)+"</a></td>"):l.push("<td>"+h+"</td>");l.push("</tr>"),f.push(l.join(""))}}f.push("</tbody>"),c(f.join("")),this.highlightClass&&e.querySelector("table").classList.add("click-to-highlight")}else d(this.errorInvalidData,this.errorClass,this.defaultErrorStyle)}}};app.addControl("data-table",t)}();