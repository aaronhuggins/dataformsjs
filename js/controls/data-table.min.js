!function(){"use strict";var t={data:{bind:null,columns:null,labels:null,emptyDataText:"No records found",errorInvalidData:"Error invalid data for table",errorClass:null,defaultErrorStyle:"color:white; background-color:red; padding:0.5rem 1rem; margin:.5rem;",highlightClass:null,tableAttr:null,colClass:null,colLinkTemplate:null,colLinkFields:null,rowItemName:null},onLoad:function(e,t){var l,a,r,s,i,n,p,o,h,u=e.querySelector("template");function c(t){null===u?e.innerHTML=t:(function(){if(null===u)return e.innerHTML="";var t=e.querySelector("table");null!==t&&t.parentNode.removeChild(t)}(),e.insertAdjacentHTML("beforeend",t))}function d(t,e,l){c(e?'<table class="'+e+'}"><caption>'+app.escapeHtml(t)+"</caption></table>":'<table><caption style="display:block; '+l+'">'+app.escapeHtml(t)+"</caption></table>")}null===u&&(u=e.querySelector('script[type="text/x-template"]'));var m=t&&t[this.bind]?t[this.bind]:null;if(null===m&&void 0!==app.plugins.dataBind&&"function"==typeof app.plugins.dataBind.getBindValue&&(m=app.plugins.dataBind.getBindValue(this.bind,t)),null!==m)if(Array.isArray(m)&&0===m.length)null===this.emptyDataText?c('<table class="no-data"></table>'):c('<table class="no-data"><caption>'+app.escapeHtml(this.emptyDataText)+"</caption></table>");else{var f=!0;if((!Array.isArray(m)||0<m.length&&"object"!=typeof m[0])&&(f=!1),f){if("string"==typeof this.columns)for(v=0,H=(a=this.columns.split(",")).length;v<H;v++)a[v]=a[v].trim();else a=Object.keys(m[0]);if(r=a,"string"==typeof this.labels){for(v=0,H=(r=this.labels.split(",")).length;v<H;v++)r[v]=r[v].trim();r.length!==a.length&&null===u&&(r=a)}var b=[],g="<table";if(this.tableAttr)for(var y=this.tableAttr.split(",").map(function(t){return t.trim()}),v=0,H=y.length;v<H;v++){var T=y[v],C=T.indexOf("=");1<C?(o=T.substr(0,C).trim(),h=T.substr(C+1).trim(),g+=" "+app.escapeHtml(o)+'="'+app.escapeHtml(h)+'"',"is"===o&&"sortable-table"===h&&(g+=" data-sort")):g+=" "+app.escapeHtml(T)}if(b.push(g+"><thead><tr>"),l=[],this.colClass){var j=this.colClass.split(",").map(function(t){return t.trim()}),L={};for(j.forEach(function(t){var e,l,a=t.indexOf("=");0<a&&(e=t.substr(0,a),l=t.substr(a+1),L[e]=l)}),v=0,H=r.length;v<H;v++){var E=r[v],S=null;void 0!==L[v.toString()]?S=L[v.toString()]:void 0!==L[E]&&(S=L[E]),S?l.push('<th class="'+app.escapeHtml(S)+'">'+app.escapeHtml(r[v])+"</th>"):l.push("<th>"+app.escapeHtml(r[v])+"</th>")}}else for(v=0,H=r.length;v<H;v++)l.push("<th>"+app.escapeHtml(r[v])+"</th>");if(b.push(l.join("")),b.push("</tr></thead>"),b.push("<tbody>"),null!==u)try{if(void 0===app.jsTemplate)throw Error("Error - When using <data-table> with a template the script [js/extensions/jsTemplate.js] is required.");for(var k=app.jsTemplate.compile(this.rowItemName,!1,u.innerHTML),x=0,A=m.length;x<A;x++){n=m[x];try{b.push(k(n,x,app.escapeHtml,app.format))}catch(t){this.errorClass?b.push('<tr class="'+this.errorClass+'">'):b.push('<tr style="'+this.defaultErrorStyle+'">'),b.push('<td colspan="'+a.length+'">Item Error - '+t.message+"}</td></tr>")}}}catch(t){return void d("Error Rendering Template - "+t.message,this.errorClass,this.defaultErrorStyle)}else{var q=this.colLinkTemplate,w=null;for(q&&(w=this.colLinkFields?this.colLinkFields.split(",").map(function(t){return t.trim()}):[a[0]]),i=a.length,v=0,H=m.length;v<H;v++){for((l=[]).push("<tr>"),s=0;s<i;s++)p=a[s],h=null===(h=(n=m[v])[p])?"":app.escapeHtml(h),q&&-1!==w.indexOf(p)?l.push('<td><a href="'+app.buildUrl(q,n)+'">'+app.escapeHtml(h)+"</a></td>"):l.push("<td>"+h+"</td>");l.push("</tr>"),b.push(l.join(""))}}b.push("</tbody>"),c(b.join("")),this.highlightClass&&e.querySelector("table").classList.add("click-to-highlight")}else d(this.errorInvalidData,this.errorClass,this.defaultErrorStyle)}}};app.addControl("data-table",t)}();