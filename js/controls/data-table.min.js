!function(){"use strict";var t={data:{bind:null,columns:null,labels:null,emptyDataText:"No records found",errorInvalidData:"Error invalid data for table",errorClass:null,defaultErrorStyle:"color:white; background-color:red; padding:0.5rem 1rem; margin:.5rem;",highlightClass:null,tableAttr:null,colClass:null,colLinkTemplate:null,colLinkFields:null,rowItemName:null},onLoad:function(e,t){var r,a,l,s,n,i,o,p,u,h=e.querySelector("template:not([data-footer])");null===h&&(h=e.querySelector('script[type="text/x-template"]:not([data-footer])'));var c=e.querySelector("template[data-footer]");function d(t){null===h&&null===c?e.innerHTML=t:(function(){if(null===h&&null===c)return e.innerHTML="";var t=e.querySelector("table");null!==t&&t.parentNode.removeChild(t)}(),e.insertAdjacentHTML("beforeend",t))}function m(t,e,r){d(e?'<table class="'+e+'}"><caption>'+app.escapeHtml(t)+"</caption></table>":'<table><caption style="display:block; '+r+'">'+app.escapeHtml(t)+"</caption></table>")}null===c&&(c=e.querySelector('script[type="text/x-template"][data-footer]'));var f=t&&t[this.bind]?t[this.bind]:null;if(null===f&&void 0!==app.plugins.dataBind&&"function"==typeof app.plugins.dataBind.getBindValue&&(f=app.plugins.dataBind.getBindValue(this.bind,t)),null!==f)if(Array.isArray(f)&&0===f.length)null===this.emptyDataText?d('<table class="no-data"></table>'):d('<table class="no-data"><caption>'+app.escapeHtml(this.emptyDataText)+"</caption></table>");else{t=!0;if((!Array.isArray(f)||0<f.length&&"object"!=typeof f[0])&&(t=!1),t){if("string"==typeof this.columns)for(v=0,H=(a=this.columns.split(",")).length;v<H;v++)a[v]=a[v].trim();else a=Object.keys(f[0]);if(l=a,"string"==typeof this.labels){for(v=0,H=(l=this.labels.split(",")).length;v<H;v++)l[v]=l[v].trim();l.length!==a.length&&null===h&&(l=a)}var g=[],b="<table";if(this.tableAttr)for(var y=this.tableAttr.split(",").map(function(t){return t.trim()}),v=0,H=y.length;v<H;v++){var T=y[v],j=T.indexOf("=");1<j?(p=T.substr(0,j).trim(),u=T.substr(j+1).trim(),b+=" "+app.escapeHtml(p)+'="'+app.escapeHtml(u)+'"',"is"===p&&"sortable-table"===u&&(b+=" data-sort")):b+=" "+app.escapeHtml(T)}if(g.push(b+"><thead><tr>"),r=[],this.colClass){var t=this.colClass.split(",").map(function(t){return t.trim()}),E={};for(t.forEach(function(t){var e,r=t.indexOf("=");0<r&&(e=t.substr(0,r),r=t.substr(r+1),E[e]=r)}),v=0,H=l.length;v<H;v++){var C=l[v],x=null;void 0!==E[v.toString()]?x=E[v.toString()]:void 0!==E[C]&&(x=E[C]),x?r.push('<th class="'+app.escapeHtml(x)+'">'+app.escapeHtml(l[v])+"</th>"):r.push("<th>"+app.escapeHtml(l[v])+"</th>")}}else for(v=0,H=l.length;v<H;v++)r.push("<th>"+app.escapeHtml(l[v])+"</th>");if(g.push(r.join("")),g.push("</tr></thead>"),g.push("<tbody>"),null!==h)try{if(void 0===app.jsTemplate)throw Error("Error - When using <data-table> with a template the script [js/extensions/jsTemplate.js] is required.");for(var S=app.jsTemplate.compile(this.rowItemName,!1,h.innerHTML),L=0,k=f.length;L<k;L++){i=f[L];try{g.push(S(i,L,app.escapeHtml,app.format))}catch(t){this.errorClass?g.push('<tr class="'+this.errorClass+'">'):g.push('<tr style="'+this.defaultErrorStyle+'">'),g.push('<td colspan="'+a.length+'">Item Error - '+t.message+"</td></tr>")}}}catch(t){return void m("Error Rendering Template - "+t.message,this.errorClass,this.defaultErrorStyle)}else{var q=this.colLinkTemplate,w=null;for(q&&(w=this.colLinkFields?this.colLinkFields.split(",").map(function(t){return t.trim()}):[a[0]]),n=a.length,v=0,H=f.length;v<H;v++){for((r=[]).push("<tr>"),s=0;s<n;s++)o=a[s],u=null===(u=(i=f[v])[o])?"":app.escapeHtml(u),q&&-1!==w.indexOf(o)?r.push('<td><a href="'+app.buildUrl(q,i)+'">'+app.escapeHtml(u)+"</a></td>"):r.push("<td>"+u+"</td>");r.push("</tr>"),g.push(r.join(""))}}if(c){g.push("<tfoot>");var A=function(t){for(var e=[],r=0,a=f.length;r<a;r++){var l=f[r][t];switch(typeof l){case"number":e.push(l);break;case"string":l=parseFloat(l),isNaN(l)||e.push(l)}}return e};try{if(void 0===app.jsTemplate)throw Error("Error - When using <data-table> with a template the script [js/extensions/jsTemplate.js] is required.");var M=app.jsTemplate.compile(["sum","avg","max","min","count"],!1,c.innerHTML);try{g.push(M(function(t){return A(t).reduce(function(t,e){return t+e},0)},function(t){t=A(t);return t.reduce(function(t,e){return t+e},0)/t.length},function(t){return Math.max.apply(null,A(t))},function(t){return Math.min.apply(null,A(t))},function(){return f.length},app.escapeHtml,app.format))}catch(t){this.errorClass?g.push('<tr class="'+this.errorClass+'">'):g.push('<tr style="'+this.defaultErrorStyle+'">'),g.push('<td colspan="'+a.length+'">Footer Error - '+t.message+"</td></tr>")}}catch(t){return void m("Error Rendering Footer Template - "+t.message,this.errorClass,this.defaultErrorStyle)}g.push("</tfoot>")}g.push("</tbody>"),d(g.join("")),this.highlightClass&&e.querySelector("table").classList.add("click-to-highlight")}else m(this.errorInvalidData,this.errorClass,this.defaultErrorStyle)}}};app.addControl("data-table",t)}();