!function(){"use strict";var t={data:{bind:null,columns:null,labels:null,emptyDataText:"No records found",errorInvalidData:"Error invalid data for table",errorClass:null,defaultErrorStyle:"color:white; background-color:red; padding:0.5rem 1rem; margin:.5rem;",highlightClass:null},onLoad:function(e,t){var a,l,r,s,i,n,p,o,u,h,d,c=e.querySelector("template");function m(t){null===c?e.innerHTML=t:(function(){if(null===c)return e.innerHTML="";var t=e.querySelector("table");null!==t&&t.parentNode.removeChild(t)}(),e.insertAdjacentHTML("beforeend",t))}null===c&&(c=e.querySelector('script[type="text/x-template"]'));var b=t&&t[this.bind]?t[this.bind]:null;if(null===b&&void 0!==app.plugins.dataBind&&"function"==typeof app.plugins.dataBind.getBindValue&&(b=app.plugins.dataBind.getBindValue(this.bind,t)),null!==b)if(Array.isArray(b)&&0===b.length)null===this.emptyDataText?m('<table class="no-data"></table>'):m('<table class="no-data"><caption>'+app.escapeHtml(this.emptyDataText)+"<caption></table>");else{var f=!0;if((!Array.isArray(b)||0<b.length&&"object"!=typeof b[0])&&(f=!1),f){if("string"==typeof this.columns)for(s=0,i=(l=this.columns.split(",")).length;s<i;s++)l[s]=l[s].trim();else l=Object.keys(b[0]);if(r=l,"string"==typeof this.labels){for(s=0,i=(r=this.labels.split(",")).length;s<i;s++)r[s]=r[s].trim();r.length!==l.length&&null===c&&(r=l)}var g=[],y="<table",v=e.getAttribute("data-table-attr");if(v)for(s=0,i=(v=v.split(",").map(function(t){return t.trim()})).length;s<i;s++){var H=v[s],T=H.indexOf("=");1<T?(h=H.substr(0,T).trim(),d=H.substr(T+1).trim(),y+=" "+app.escapeHtml(h)+'="'+app.escapeHtml(d)+'"',"is"===h&&"sortable-table"===d&&(y+=" data-sort")):y+=" "+app.escapeHtml(H)}for(g.push(y+"><thead><tr>"),a=[],s=0,i=r.length;s<i;s++)a.push("<th>"+app.escapeHtml(r[s])+"</th>");if(g.push(a.join("")),g.push("</tr></thead>"),g.push("<tbody>"),null!==c)try{if(void 0===app.jsTemplate)throw Error("Error - When using <data-table> with a template the script [js/extensions/jsTemplate.js] is required.");for(var j=app.jsTemplate.compile(null,!1,c.innerHTML),A=0,E=b.length;A<E;A++){o=b[A];try{g.push(j(o,A,app.escapeHtml,app.format))}catch(t){this.errorClass?g.push('<tr class="'+this.errorClass+'">'):g.push('<tr style="'+this.defaultErrorStyle+'">'),g.push('<td colspan="'+l.length+'">Item Error - '+t.message+"}</td></tr>")}}}catch(t){return void(this.errorClass?m('<table class="'+this.errorClass+'"><caption>Error Rendering Template - '+t.message+"}</caption></table>"):m('<table style="'+this.defaultErrorStyle+'"><caption>Error Rendering Template - '+t.message+"</caption></table>"))}else{var x=e.getAttribute("data-col-link-template"),C=e.getAttribute("data-col-link-fields");for(x&&(C=C?C.split(",").map(function(t){return t.trim()}):[l[0]]),p=l.length,s=0,i=b.length;s<i;s++){for((a=[]).push("<tr>"),n=0;n<p;n++)u=l[n],d=(o=b[s])[u],x&&-1!==C.indexOf(u)?a.push('<td><a href="'+app.buildUrl(x,o)+'">'+app.escapeHtml(d)+"</a></td>"):a.push("<td>"+app.escapeHtml(d)+"</td>");a.push("</tr>"),g.push(a.join(""))}}g.push("</tbody>"),m(g.join("")),e.getAttribute("data-highlight-class")&&e.querySelector("table").classList.add("click-to-highlight")}else m("<table><caption>"+app.escapeHtml(this.errorInvalidData)+"<caption></table>")}}};app.addControl("data-table",t)}();