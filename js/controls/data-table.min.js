!function(){"use strict";var t={data:{bind:null,columns:null,labels:null,emptyDataText:"No records found",errorInvalidData:"Error invalid data for table",errorClass:null,defaultErrorStyle:"color:white; background-color:red; padding:0.5rem 1rem; margin:.5rem;",highlightClass:null},onLoad:function(e,t){var a,r,l,i,n,s,p,o,u,h,d,c=e.querySelector("template");function g(t){null===c?e.innerHTML=t:(function(){if(null===c)return e.innerHTML="";var t=e.querySelector("table");null!==t&&t.parentNode.removeChild(t)}(),e.insertAdjacentHTML("beforeend",t))}null===c&&(c=e.querySelector('script[type="text/x-template"]'));var f=t&&t[this.bind]?t[this.bind]:null;if(null===f&&void 0!==app.plugins.dataBind&&"function"==typeof app.plugins.dataBind.getBindValue&&(f=app.plugins.dataBind.getBindValue(this.bind,t)),null!==f)if(Array.isArray(f)&&0===f.length)null===this.emptyDataText?g('<table class="no-data"></table>'):g('<table class="no-data"><caption>'+app.escapeHtml(this.emptyDataText)+"<caption></table>");else{var m=!0;if((!Array.isArray(f)||0<f.length&&"object"!=typeof f[0])&&(m=!1),m){if("string"==typeof this.columns)for(i=0,n=(r=this.columns.split(",")).length;i<n;i++)r[i]=r[i].trim();else r=Object.keys(f[0]);if(l=r,"string"==typeof this.labels){for(i=0,n=(l=this.labels.split(",")).length;i<n;i++)l[i]=l[i].trim();l.length!==r.length&&null===c&&(l=r)}var b=[],y="<table",v=e.getAttribute("data-table-attr");if(v)for(i=0,n=(v=v.split(",").map(function(t){return t.trim()})).length;i<n;i++){var H=v[i],x=H.indexOf("=");1<x?(h=H.substr(0,x).trim(),d=H.substr(x+1).trim(),y+=" "+app.escapeHtml(h)+'="'+app.escapeHtml(d)+'"',"is"===h&&"sortable-table"===d&&(y+=" data-sort")):y+=" "+app.escapeHtml(H)}for(b.push(y+"><thead><tr>"),a=[],i=0,n=l.length;i<n;i++)a.push("<th>"+app.escapeHtml(l[i])+"</th>");if(b.push(a.join("")),b.push("</tr></thead>"),b.push("<tbody>"),null!==c){for(var S,A=c.innerHTML,E=/\$\{([^}]+)\}/g,T=0,C=[],j=0;null!==(S=E.exec(A));)if(C.push(JSON.stringify(A.substring(j,S.index))),C.push("String(app.escapeHtml("+S[1]+"))"),j=S.index+S[0].length,1e3<++T)return void app.showErrorAlert("Unexpected Loop Error in <data-table>");C.push(JSON.stringify(A.substring(j,A.length)));try{for(s=0,p=C.length;s<p;s++){var L=C[s];if(!L.startsWith("String(app.escapeHtml(")&&L.includes("${"))throw new Error("Invalid expression: missing `}` character")}for(var w=new Function("item","index","app","format","with(item){return "+C.join(" + ")+"}"),k=0,B=f.length;k<B;k++){o=f[k];try{b.push(w(o,k,app,app.format))}catch(t){this.errorClass?b.push('<tr class="'+this.errorClass+'">'):b.push('<tr style="'+this.defaultErrorStyle+'">'),b.push('<td colspan="'+r.length+'">Item Error - '+t.message+"}</td></tr>")}}}catch(t){return void(this.errorClass?g('<table class="'+this.errorClass+'"><caption>Error Rendering Template - '+t.message+"}</caption></table>"):g('<table style="'+this.defaultErrorStyle+'"><caption>Error Rendering Template - '+t.message+"</caption></table>"))}}else{var D=e.getAttribute("data-col-link-template"),O=e.getAttribute("data-col-link-fields");for(D&&(O=O?O.split(",").map(function(t){return t.trim()}):[r[0]]),p=r.length,i=0,n=f.length;i<n;i++){for((a=[]).push("<tr>"),s=0;s<p;s++)u=r[s],d=(o=f[i])[u],D&&-1!==O.indexOf(u)?a.push('<td><a href="'+app.buildUrl(D,o)+'">'+app.escapeHtml(d)+"</a></td>"):a.push("<td>"+app.escapeHtml(d)+"</td>");a.push("</tr>"),b.push(a.join(""))}}b.push("</tbody>"),g(b.join("")),e.getAttribute("data-highlight-class")&&e.querySelector("table").classList.add("click-to-highlight")}else g("<table><caption>"+app.escapeHtml(this.errorInvalidData)+"<caption></table>")}}};app.addControl("data-table",t)}();