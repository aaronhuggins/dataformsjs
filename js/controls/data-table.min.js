!function(){"use strict";var t={data:{bind:null,columns:null,labels:null,emptyDataText:"No records found",errorInvalidData:"Error invalid data for table",errorClass:null,defaultErrorStyle:"color:white; background-color:red; padding:0.5rem 1rem; margin:.5rem;",highlightClass:null,tableAttr:null,colClass:null,colLinkTemplate:null,colLinkFields:null},onLoad:function(e,t){var l,a,r,s,i,n,p,o,h,u=e.querySelector("template");function c(t){null===u?e.innerHTML=t:(function(){if(null===u)return e.innerHTML="";var t=e.querySelector("table");null!==t&&t.parentNode.removeChild(t)}(),e.insertAdjacentHTML("beforeend",t))}null===u&&(u=e.querySelector('script[type="text/x-template"]'));var d=t&&t[this.bind]?t[this.bind]:null;if(null===d&&void 0!==app.plugins.dataBind&&"function"==typeof app.plugins.dataBind.getBindValue&&(d=app.plugins.dataBind.getBindValue(this.bind,t)),null!==d)if(Array.isArray(d)&&0===d.length)null===this.emptyDataText?c('<table class="no-data"></table>'):c('<table class="no-data"><caption>'+app.escapeHtml(this.emptyDataText)+"</caption></table>");else{var m=!0;if((!Array.isArray(d)||0<d.length&&"object"!=typeof d[0])&&(m=!1),m){if("string"==typeof this.columns)for(y=0,v=(a=this.columns.split(",")).length;y<v;y++)a[y]=a[y].trim();else a=Object.keys(d[0]);if(r=a,"string"==typeof this.labels){for(y=0,v=(r=this.labels.split(",")).length;y<v;y++)r[y]=r[y].trim();r.length!==a.length&&null===u&&(r=a)}var f=[],b="<table";if(this.tableAttr)for(var g=this.tableAttr.split(",").map(function(t){return t.trim()}),y=0,v=g.length;y<v;y++){var H=g[y],T=H.indexOf("=");1<T?(o=H.substr(0,T).trim(),h=H.substr(T+1).trim(),b+=" "+app.escapeHtml(o)+'="'+app.escapeHtml(h)+'"',"is"===o&&"sortable-table"===h&&(b+=" data-sort")):b+=" "+app.escapeHtml(H)}if(f.push(b+"><thead><tr>"),l=[],this.colClass){var C=this.colClass.split(",").map(function(t){return t.trim()}),j={};for(C.forEach(function(t){var e,l,a=t.indexOf("=");0<a&&(e=t.substr(0,a),l=t.substr(a+1),j[e]=l)}),y=0,v=r.length;y<v;y++){var L=r[y],E=null;void 0!==j[y.toString()]?E=j[y.toString()]:void 0!==j[L]&&(E=j[L]),E?l.push('<th class="'+app.escapeHtml(E)+'">'+app.escapeHtml(r[y])+"</th>"):l.push("<th>"+app.escapeHtml(r[y])+"</th>")}}else for(y=0,v=r.length;y<v;y++)l.push("<th>"+app.escapeHtml(r[y])+"</th>");if(f.push(l.join("")),f.push("</tr></thead>"),f.push("<tbody>"),null!==u)try{if(void 0===app.jsTemplate)throw Error("Error - When using <data-table> with a template the script [js/extensions/jsTemplate.js] is required.");for(var x=app.jsTemplate.compile(null,!1,u.innerHTML),S=0,k=d.length;S<k;S++){n=d[S];try{f.push(x(n,S,app.escapeHtml,app.format))}catch(t){this.errorClass?f.push('<tr class="'+this.errorClass+'">'):f.push('<tr style="'+this.defaultErrorStyle+'">'),f.push('<td colspan="'+a.length+'">Item Error - '+t.message+"}</td></tr>")}}}catch(t){return void(this.errorClass?c('<table class="'+this.errorClass+'"><caption>Error Rendering Template - '+t.message+"}</caption></table>"):c('<table style="'+this.defaultErrorStyle+'"><caption>Error Rendering Template - '+t.message+"</caption></table>"))}else{var A=this.colLinkTemplate,q=null;for(A&&(q=this.colLinkFields?this.colLinkFields.split(",").map(function(t){return t.trim()}):[a[0]]),i=a.length,y=0,v=d.length;y<v;y++){for((l=[]).push("<tr>"),s=0;s<i;s++)p=a[s],h=null===(h=(n=d[y])[p])?"":app.escapeHtml(h),A&&-1!==q.indexOf(p)?l.push('<td><a href="'+app.buildUrl(A,n)+'">'+app.escapeHtml(h)+"</a></td>"):l.push("<td>"+h+"</td>");l.push("</tr>"),f.push(l.join(""))}}f.push("</tbody>"),c(f.join("")),this.highlightClass&&e.querySelector("table").classList.add("click-to-highlight")}else c("<table><caption>"+app.escapeHtml(this.errorInvalidData)+"</caption></table>")}}};app.addControl("data-table",t)}();